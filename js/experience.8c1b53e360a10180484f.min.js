!function(i){var n={};function o(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=i,o.c=n,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(i,n,function(t){return e[t]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=254)}([,,,,,function(t,e,i){"use strict";e.a=function(t){return t.originalInit=t.init,t.originalBindMethods=t.bindMethods,AFRAME.utils.extendDeep({init:function(){this.bindMethods(),this.enabled=!1,this.originalInit&&(this.originalInit=AFRAME.utils.bind(this.originalInit,this),this.originalInit())},bindMethods:function(){this.onMixinEnable=AFRAME.utils.bind(this.onMixinEnable,this),this.onMixinDisable=AFRAME.utils.bind(this.onMixinDisable,this),this.onEnable&&(this.onEnable=AFRAME.utils.bind(this.onEnable,this)),this.onDisable&&(this.onDisable=AFRAME.utils.bind(this.onDisable,this)),this.originalBindMethods&&this.originalBindMethods()},play:function(){this.addMixinEventListeners()},remove:function(){this.removeMixinEventListeners()},addMixinEventListeners:function(){this.el.addEventListener("lucidweb.enable",this.onMixinEnable),this.el.addEventListener("lucidweb.disable",this.onMixinDisable)},removeMixinEventListeners:function(){this.el.removeEventListener("lucidweb.enable",this.onMixinEnable),this.el.removeEventListener("lucidweb.disable",this.onMixinDisable)},onMixinEnable:function(){this.onEnable?this.onEnable():console.warn("enabling-mixin requires method onEnable() which has not been implemented in the target object yet"),this.enabled=!0},onMixinDisable:function(){this.onDisable?this.onDisable():console.warn("enabling-mixin requires method onDisable() which has not been implemented in the target object yet"),this.enabled=!1}},t)}},,function(G,H){var I;I=function(){return this}();try{I=I||Function("return this")()||eval("this")}catch(t){"object"==typeof window&&(I=window)}G.exports=I},,,function(t,e){var i,n,o=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function l(e){if(i===setTimeout)return setTimeout(e,0);if((i===s||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:s}catch(t){i=s}try{n="function"==typeof clearTimeout?clearTimeout:r}catch(t){n=r}}();var a,u=[],c=!1,d=-1;function h(){c&&a&&(c=!1,a.length?u=a.concat(u):d=-1,u.length&&v())}function v(){if(!c){var t=l(h);c=!0;for(var e=u.length;e;){for(a=u,u=[];++d<e;)a&&a[d].run();d=-1,e=u.length}a=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===r||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function m(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];u.push(new p(t,e)),1!==u.length||c||l(v)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},,,,,,,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5},o=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror"],s=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],r=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"],l="undefined"!=typeof window&&void 0!==window.document?window.document:{},a="fullscreenEnabled"in l&&Object.keys(n)||o[0]in l&&o||s[0]in l&&s||r[0]in l&&r||[];e.default={requestFullscreen:function(t){return t[a[n.requestFullscreen]]()},requestFullscreenFunction:function(t){return t[a[n.requestFullscreen]]},get exitFullscreen(){return l[a[n.exitFullscreen]].bind(l)},addEventListener:function(t,e,i){return l.addEventListener(a[n[t]],e,i)},removeEventListener:function(t,e,i){return l.removeEventListener(a[n[t]],e,i)},get fullscreenEnabled(){return Boolean(l[a[n.fullscreenEnabled]])},set fullscreenEnabled(t){},get fullscreenElement(){return l[a[n.fullscreenElement]]},set fullscreenElement(t){},get onfullscreenchange(){return l[("on"+a[n.fullscreenchange]).toLowerCase()]},set onfullscreenchange(t){return l[("on"+a[n.fullscreenchange]).toLowerCase()]=t},get onfullscreenerror(){return l[("on"+a[n.fullscreenerror]).toLowerCase()]},set onfullscreenerror(t){return l[("on"+a[n.fullscreenerror]).toLowerCase()]=t}}},,,,,function(t,e,i){"use strict";e.a=function(t){return t.originalInit=t.init,t.originalBindMethods=t.bindMethods,AFRAME.utils.extendDeep({init:function(){this.bindMethods(),this.originalInit&&this.originalInit()},bindMethods:function(){this.onMixinEventTriggered=AFRAME.utils.bind(this.onMixinEventTriggered,this),this.onEventTriggered&&(this.onEventTriggered=AFRAME.utils.bind(this.onEventTriggered,this)),this.originalBindMethods&&this.originalBindMethods()},play:function(){this.addMixinEventListeners()},remove:function(){this.removeMixinEventListeners()},addMixinEventListeners:function(){this.el.addEventListener("lucidweb.event.triggered",this.onMixinEventTriggered)},removeMixinEventListeners:function(){this.el.removeEventListener("lucidweb.event.triggered",this.onMixinEventTriggered)},onMixinEventTriggered:function(){this.onEventTriggered?this.onEventTriggered():console.warn("Trigger mixin requires an implementation for onEventTriggered()")}},t)}},,,function(t,e){AFRAME.registerComponent("listen-for-scene-event",{schema:{event:{type:"string"}},init:function(){this.bindMethods(),this.addEventListeners()},remove:function(){this.removeEventListeners()},bindMethods:function(){this.onEventTriggered=AFRAME.utils.bind(this.onEventTriggered,this)},addEventListeners:function(){this.el.sceneEl.addEventListener(this.data.event,this.onEventTriggered)},removeEventListeners:function(){this.el.sceneEl.removeEventListener(this.data.event,this.onEventTriggered)},onEventTriggered:function(t){this.el.emit("lucidweb.event.triggered",{msg:"Scene event triggered: "+this.data.event},!1)}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){AFRAME.registerComponent("listen-for-parent-event",{multiple:!0,schema:{event:{type:"string"}},init:function(){this.bindMethods(),this.addEventListeners()},remove:function(){this.removeEventListeners()},bindMethods:function(){this.onEventTriggered=AFRAME.utils.bind(this.onEventTriggered,this)},addEventListeners:function(){this.el.parentEl.addEventListener(this.data.event,this.onEventTriggered)},removeEventListeners:function(){this.el.parentEl.removeEventListener(this.data.event,this.onEventTriggered)},onEventTriggered:function(t){this.el.emit("lucidweb.event.triggered",{msg:"Parent event triggered: "+this.data.event},!1)}})},function(t,e,i){"use strict";i.r(e);var n=i(5);i(90),AFRAME.registerComponent("experience-state-controller",Object(n.a)({schema:{name:{type:"string"}},onEnable:function(){this.system.changeState("#"+this.el.id),this.el.emit("lucidweb.experience-state.started",{state:"#"+this.el.id},!1)},onDisable:function(){this.el.emit("lucidweb.experience-state.stopped",{state:"#"+this.el.id},!1)}}))},function(t,e){AFRAME.registerSystem("experience-state-controller",{init:function(){this.bindMethods()},bindMethods:function(){this.changeState=AFRAME.utils.bind(this.changeState,this)},changeState:function(t){}})},function(t,e,i){i(93),AFRAME.registerComponent("video-controller",{schema:{src:{type:"selector"},"controls-enabled":{type:"boolean",default:!0},autoplay:{type:"boolean",default:!1}},init:function(){this.bindMethods()},bindMethods:function(){this.playVideo=AFRAME.utils.bind(this.playVideo,this)},stopVideo:function(){this.system.stopVideo(this.el,this.data.src)},playVideo:function(){this.data["controls-enabled"]?this.system.enableControls():this.system.disableControls(),console.log(this.data),this.system.playVideo(this.el,this.data.src)}})},function(t,e){AFRAME.registerPrimitive("video-controls",{defaultComponents:{"video-controls":{}},mappings:{}})},function(t,e,i){"use strict";i.r(e);var n=i(17),o=i.n(n),s=i(94),r=i.n(s);var l,a,u=(l='\n  <div class="progress-bar">\n      <div class="background">&nbsp;</div>\n      <div class="progress" style="">&nbsp;</div>\n      <div id="update-video-progress">&nbsp;</div>\n  </div>\n  <div class="background">&nbsp;</div>\n  <div class="controls blue-controls">\n      <div class="right">\n          <button type="button" class="control icon enter-vr wide">\n              <i class="icon icon-cardboard"></i>\n          </button>\n          <button type="button" class="control icon enter-fullscreen">\n              <i class="icon icon-resize"></i>\n          </button>\n          <button type="button" class="control icon share-menu">\n              <i class="icon icon-share"></i>\n          </button>\n      </div>\n      <div class="left">\n          <button type="button" class="control icon play-video" style="display: none;"><i class="icon icon-play">&nbsp;</i></button>\n          <button type="button" class="control icon pause-video"><i class="icon icon-pause">&nbsp;</i></button>\n          <button type="button" class="control icon replay-video" style="display: none;"><i class="icon icon-play">&nbsp;</i></button>\n          <button type="button" class="control icon turn-video-volume-off"><i class="icon icon-volume">&nbsp;</i></button>\n          <button type="button" class="control icon turn-video-volume-on" style="display: none;"><i class="icon icon-mute">&nbsp;</i></button>\n\n      </div>\n      <div class="left">\n      <div class="time-display-progress control mono">\n              <span class="current-time"></span>\n          </div>\n      </div>\n      <div class="left">\n      <div class="time-display-duration control mono">\n              <span>/</span>\n              <span class="duration"></span>\n          </div>\n      </div>\n  </div>\n\n  <div class="share-video blue-controls" style="display:none;">\n\n    <a class="share-video-close" href="#"><i class="icon icon-close">&nbsp;</i></a>\n\n\n\n    <div class="icon-group">\n        <div class="reload" style="display: none;">\n          <a class="share-link replay" href="#" target="_blank"><i class="icon icon-reload">&nbsp;</i></a>\n        </div>\n        <div>\n          <a class="share-link share-to-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://jensdewitte.github.io/social/" target="_blank"><i class="icon icon-facebook">&nbsp;</i></a>\n          <a class="share-link share-to-twitter" href="https://twitter.com/intent/tweet?text=I+just+watched+Syria%27s+silence%2C+a+cooperation+between+Fisheye+VR+and+VRT+journalist+Jens+Franssen.++Have+a+look+at+https%3A%2F%2Flucidweb.io%2Fprojects%2F360-video-player%2Findex.html" target="_blank"><i class="icon icon-twitter">&nbsp;</i></a>\n          <a class="share-link share-copy-to-clipboard" href="#"><i class="icon icon-link">&nbsp;</i></a>\n        </div>\n    </div>\n\n  </div>\n',(a=document.createElement("div")).id="video-controls-2d",a.style.bottom="0px",a.innerHTML=l,a);i(292),AFRAME.registerSystem("video-controller",{init:function(){this.bindMethods(),this.videoSphere=null,this.videoSphereConfigured=!1,this.controller=null,this.video=null,this.documentInteractionReceived=!1,this.autoplay=!1,this.controlsEnabled=!0,this.controls=null,this.progressAnimator=null,this.controlsMovementInterval=null,this.vr=!1,this.logo=null,this.el.sceneEl.setAttribute("device-detection",{}),this.el.sceneEl.setAttribute("transition-to-cardboard",{})},bindMethods:function(){var t=AFRAME.utils.bind;this.playVideo=t(this.playVideo,this),this.pauseVideo=t(this.pauseVideo,this),this.volumeOn=t(this.volumeOn,this),this.volumeOff=t(this.volumeOff,this),this.duration=t(this.duration,this),this.title=t(this.title,this),this.currentTime=t(this.currentTime,this),this.changeTime=t(this.changeTime,this),this.onVideoReadyToPlay=t(this.onVideoReadyToPlay,this),this.onVideoEnded=t(this.onVideoEnded,this),this.onVideoStalled=t(this.onVideoStalled,this),this.onStartButtonClicked=t(this.onStartButtonClicked,this),this.enableHTMLVideoControls=t(this.enableHTMLVideoControls,this),this.enableVRVideoControls=t(this.enableVRVideoControls,this),this.onVideoPlayClicked=t(this.onVideoPlayClicked,this),this.onVideoPauseClicked=t(this.onVideoPauseClicked,this),this.onVideoReplayClicked=t(this.onVideoReplayClicked,this),this.onVideoVolumeOffClicked=t(this.onVideoVolumeOffClicked,this),this.onVideoVolumeOnClicked=t(this.onVideoVolumeOnClicked,this),this.onEnterVRClicked=t(this.onEnterVRClicked,this),this.onEnterVR=t(this.onEnterVR,this),this.onExitVR=t(this.onExitVR,this),this.onEnterFullscreenClicked=t(this.onEnterFullscreenClicked,this),this.onFullscreenChange=t(this.onFullscreenChange,this),this.onVideoTimeUpdate=t(this.onVideoTimeUpdate,this),this.startProgressAnimation=t(this.startProgressAnimation,this),this.stopProgressAnimation=t(this.stopProgressAnimation,this),this.moveProgressBar=t(this.moveProgressBar,this),this.showControls=t(this.showControls,this),this.showEndScreen=t(this.showEndScreen,this),this.hideControls=t(this.hideControls,this),this.moveControlsTo=t(this.moveControlsTo,this),this.isMoving=t(this.isMoving,this),this.stopMoving=t(this.stopMoving,this),this.updateControlsPosition=t(this.updateControlsPosition,this),this.onMouseIdle=t(this.onMouseIdle,this),this.onMouseMoving=t(this.onMouseMoving,this),this.onScrollbarClicked=t(this.onScrollbarClicked,this),this.onCopyLinkToClipboard=t(this.onCopyLinkToClipboard,this),this.confirmLinkCopiedToClipboard=t(this.confirmLinkCopiedToClipboard,this),this.onBodyTouchEnd=t(this.onBodyTouchEnd,this),this.enableControls=t(this.enableControls,this),this.disableControls=t(this.disableControls,this),this.onVideoControlsPlayClicked=t(this.onVideoControlsPlayClicked,this),this.onVideoControlsPauseClicked=t(this.onVideoControlsPauseClicked,this),this.onVideoControlsReplayClicked=t(this.onVideoControlsReplayClicked,this),this.onVideoControlsVolumeOffClicked=t(this.onVideoControlsVolumeOffClicked,this),this.onVideoControlsVolumeOnClicked=t(this.onVideoControlsVolumeOnClicked,this),this.onShareButtonClicked=t(this.onShareButtonClicked,this),this.onShareModalClosed=t(this.onShareModalClosed,this),this.onVideoPaused=t(this.onVideoPaused,this),this.onVideoPlaying=t(this.onVideoPlaying,this),this.onVideoVolumeChange=t(this.onVideoVolumeChange,this)},title:function(){return this.video?this.video.getAttribute("title"):""},duration:function(){return this.video?this.video.duration:null},currentTime:function(){if(this.video)return this.video.currentTime},changeTime:function(t){this.video&&(this.video.currentTime=t)},pauseVideo:function(){},volumeOn:function(){},volumeOff:function(){},onVideoControlsPlayClicked:function(){this.video.play(),this.showControls(),this.startProgressAnimation()},onVideoControlsPauseClicked:function(){this.showControls(),this.stopProgressAnimation(),this.video.pause()},onVideoControlsReplayClicked:function(){this.video.currentTime=0,this.showControls(),this.startProgressAnimation(),this.video.play(),this.controls.querySelector(".play-video").style.display="none",this.controls.querySelector(".replay-video").style.display="none",this.controls.querySelector(".pause-video").style.display="block"},onVideoControlsVolumeOnClicked:function(){this.color="#34dd4e",this.video.muted=!1},onVideoControlsVolumeOffClicked:function(){this.video.muted=!0},onVideoPaused:function(){this.video&&this.video.ended||(this.el.emit("lucidweb.video-controller.video-paused"),this.controls&&(this.controls.querySelector(".play-video").style.display="block",this.controls.querySelector(".replay-video").style.display="none",this.controls.querySelector(".pause-video").style.display="none"))},onVideoPlaying:function(){this.el.emit("lucidweb.video-controller.video-playing"),this.controls&&(this.controls.querySelector(".play-video").style.display="none",this.controls.querySelector(".replay-video").style.display="none",this.controls.querySelector(".pause-video").style.display="block")},onVideoEnded:function(){this.stopProgressAnimation(),this.el.emit("lucidweb.video-controller.playing-ended",{},!1),this.controller.emit("lucidweb.video-controller.playing-ended",{},!1),this.controls&&(this.controls.querySelector(".play-video").style.display="none",this.controls.querySelector(".replay-video").style.display="block",this.controls.querySelector(".pause-video").style.display="none"),this.showEndScreen()},onVideoStalled:function(t){this.video&&this.video.play()},onVideoVolumeChange:function(t){this.video.muted?(this.el.emit("lucidweb.video-controller.volume-off",{},!1),this.controls&&(this.controls.querySelector(".turn-video-volume-off").style.display="none",this.controls.querySelector(".turn-video-volume-on").style.display="block")):(this.el.emit("lucidweb.video-controller.volume-on",{},!1),this.controls&&(this.controls.querySelector(".turn-video-volume-off").style.display="block",this.controls.querySelector(".turn-video-volume-on").style.display="none"))},enableControls:function(){console.log("ENABLE controls"),this.controlsEnabled=!0},disableControls:function(){this.controlsEnabled=!1},stopVideo:function(t,e){this.video&&(this.video.pause(),this.video=null),this.progressAnimator&&(clearInterval(this.progressAnimator),this.progressAnimator=null),this.videoSphere&&(this.videoSphere.parentEl.removeChild(this.videoSphere),this.videoSphere=null),this.controller=null},playVideo:function(t,e){(this.videoSphereConfigured=!1,this.video&&this.removeVideoEventListeners(this.video),this.video=e,this.controller=t,this.addVideoEventListeners(this.video),this.video&&this.video.readyState&&4<=this.video.readyState?this.onVideoReadyToPlay():(console.warn("No video ready state detected"),console.warn("Current state = "+this.video.readyState),this.video.load()),null==this.logo)&&(this.logo=document.createElement("img"),this.logo.setAttribute("src","./assets/images/logo_lucidweb.png"),this.logo.setAttribute("id","logo_lucidweb"),this.logo.style.display="block",this.el.sceneEl.parentEl.appendChild(this.logo))},addVideoEventListeners:function(t){o.a.addEventListener("fullscreenchange",this.onFullscreenChange),t.addEventListener("canplay",this.onVideoReadyToPlay),t.addEventListener("timeupdate",this.onVideoTimeUpdate),t.addEventListener("ended",this.onVideoEnded),t.addEventListener("stalled",this.onVideoStalled),t.addEventListener("pause",this.onVideoPaused),t.addEventListener("playing",this.onVideoPlaying),t.addEventListener("volumechange",this.onVideoVolumeChange),this.el.sceneEl.addEventListener("lucidweb.mouse.idle",this.onMouseIdle),this.el.sceneEl.addEventListener("lucidweb.mouse.moving",this.onMouseMoving),this.el.sceneEl.addEventListener("enter-vr",this.onEnterVR),this.el.sceneEl.addEventListener("exit-vr",this.onExitVR)},removeVideoEventListeners:function(t){o.a.removeEventListener("fullscreenchange",this.onFullscreenChange),t.removeEventListener("canplay",this.onVideoReadyToPlay),t.removeEventListener("timeupdate",this.onVideoTimeUpdate),t.removeEventListener("ended",this.onVideoEnded),t.removeEventListener("stalled",this.onVideoStalled),t.removeEventListener("pause",this.onVideoPaused),t.removeEventListener("playing",this.onVideoPlaying),t.removeEventListener("volumechange",this.onVideoVolumeChange),this.el.sceneEl.removeEventListener("lucidweb.mouse.idle",this.onMouseIdle),this.el.sceneEl.removeEventListener("lucidweb.mouse.moving",this.onMouseMoving),this.el.sceneEl.removeEventListener("enter-vr",this.onEnterVR),this.el.sceneEl.removeEventListener("exit-vr",this.onExitVR)},onVideoReadyToPlay:function(){if(!this.videoSphereConfigured){this.videoSphereConfigured=!0;var t=null;this.videoSphere&&this.videoSphere.hasAttribute("src")&&(t=this.videoSphere.getAttribute("src")),null==this.videoSphere?(this.videoSphere=document.createElement("a-videosphere"),this.videoSphere.id="videosphere",this.videoSphere.setAttribute("src","#"+this.video.id),this.el.appendChild(this.videoSphere)):this.videoSphere.setAttribute("src","#"+this.video.id),this.documentInteractionReceived||this.autoplay?(this.video.play(),this.startProgressAnimation(),this.showControls(),this.el.emit("lucidweb.video-controller.playing-started",{})):this.showStartOverlay(),null!=t&&t.pause()}},onMouseIdle:function(){!this.video||this.video.paused||this.video.ended||this.hideControls()},onMouseMoving:function(){this.showControls()},onScrollbarClicked:function(t){var e=t.target,i=t.x/e.offsetWidth,n=this.duration()*i;this.changeTime(n)},confirmLinkCopiedToClipboard:function(t){var e=document.body.querySelector(".share-copy-to-clipboard").getBoundingClientRect(),i=document.createElement("p");i.style.position="fixed",i.style.top=e.bottom+"px",i.style.left=e.left+"px",i.style.width=e.width+"px",i.style.textAlign="center",i.style.color="white",i.style.opacity=.8,i.style.zIndex=1e4,i.innerText=t,document.body.appendChild(i),setTimeout(function(){document.body.removeChild(i)},2e3)},onCopyLinkToClipboard:function(t){t.preventDefault();var e=AFRAME.utils.bind(function(){this.confirmLinkCopiedToClipboard("copied")},this),i=AFRAME.utils.bind(function(){this.confirmLinkCopiedToClipboard("failed to copy")},this);r.a.writeText(window.location).then(e,i)},onStartButtonClicked:function(){if(this.video){var t=this.el.sceneEl.querySelector("#preview-background");t&&t.setAttribute("visible",!1),this.video.play(),this.showControls(),this.startProgressAnimation(),this.el.emit("lucidweb.video-controller.playing-started",{}),this.documentInteractionReceived=!0;var e=document.querySelector("#video-start-overlay button");e&&e.removeEventListener("click",this.onStartButtonClicked);var i=document.querySelector("#video-start-overlay");i&&document.body.removeChild(i),this.controlsEnabled&&(this.enableHTMLVideoControls(),this.enableVRVideoControls())}},showStartOverlay:function(){var t=document.createElement("div");t.className="background";var e=document.createElement("i");e.className="icon-play";var i=document.createElement("button");i.setAttribute("type","button"),i.addEventListener("click",this.onStartButtonClicked),i.appendChild(e);var n=document.createElement("div");n.id="video-start-overlay",n.appendChild(t),n.appendChild(i),document.body.appendChild(n)},enableHTMLVideoControls:function(){this.controls=u,document.body.appendChild(this.controls);var t=this.controls.querySelector(".share-video");document.body.appendChild(t),this.controls.querySelector(".play-video").addEventListener("click",this.onVideoPlayClicked,!1),this.controls.querySelector(".pause-video").addEventListener("click",this.onVideoPauseClicked,!1),this.controls.querySelector(".replay-video").addEventListener("click",this.onVideoReplayClicked,!1),t.querySelector(".replay").addEventListener("click",this.onVideoReplayClicked,!1),this.controls.querySelector(".turn-video-volume-on").addEventListener("click",this.onVideoVolumeOnClicked,!1),this.controls.querySelector(".turn-video-volume-off").addEventListener("click",this.onVideoVolumeOffClicked,!1),this.controls.querySelector(".enter-vr").addEventListener("click",this.onEnterVRClicked,!1),this.controls.querySelector(".enter-fullscreen").addEventListener("click",this.onEnterFullscreenClicked,!1),this.controls.querySelector(".share-menu").addEventListener("click",this.onShareButtonClicked,!1),document.body.querySelector(".share-video-close").addEventListener("click",this.onShareModalClosed,!1),this.controls.querySelector("#update-video-progress").addEventListener("click",this.onScrollbarClicked,!1),document.body.querySelector(".share-copy-to-clipboard").addEventListener("click",this.onCopyLinkToClipboard,!1),document.body.addEventListener("touchend",this.onBodyTouchEnd,!1)},enableVRVideoControls:function(){var t=document.createElement("video-controls");t.setAttribute("rotation","-25 0 0"),t.setAttribute("track-position",{target:"#maincamera",x:!1,z:!1}),this.el.appendChild(t)},onVideoPlayClicked:function(t){this.onVideoControlsPlayClicked()},onVideoPauseClicked:function(t){this.onVideoControlsPauseClicked()},onVideoReplayClicked:function(t){t.preventDefault(),this.onShareModalClosed(t),this.onVideoControlsReplayClicked()},onVideoVolumeOnClicked:function(t){this.onVideoControlsVolumeOnClicked()},onVideoVolumeOffClicked:function(t){this.onVideoControlsVolumeOffClicked()},onBodyTouchEnd:function(t){this.showControls()},onEnterVRClicked:function(t){var e=this.video.paused;this.el.enterVR();var i=setInterval(AFRAME.utils.bind(function(){this.vr&&(this.video.paused&&0==e&&this.video.play(),clearInterval(i))},this),100)},onEnterVR:function(t){this.vr=!0,this.logo.style.display="none"},onExitVR:function(t){this.logo.style.display="block",this.vr=!1},onEnterFullscreenClicked:function(t){this.logo.style.display="block",null===o.a.fullscreenElement?o.a.requestFullscreen(document.body):o.a.exitFullscreen()},onFullscreenChange:function(t){null!==o.a.fullscreenElement&&console.log("FULLSCREEN")},onShareButtonClicked:function(t){t.preventDefault();var e=document.body.querySelector(".share-video");if(e){var i=e.querySelector(".reload");switch(i&&(i.style.display="none"),e.style.display){case"block":e.style.display="none";break;case"none":default:e.style.display="block"}}},onShareModalClosed:function(t){t.preventDefault();var e=document.body.querySelector(".share-video");e&&(e.style.display="none")},onVideoTimeUpdate:function(t){if(this.video&&this.controls){var e=this.video.duration,i=this.video.currentTime;this.controls.querySelector(".duration").innerText=this.formatTime(e),this.controls.querySelector(".current-time").innerText=this.formatTime(i),this.el.emit("lucidweb.video-controller.timeupdate",{duration:e,currentTime:i},!1)}},formatTime:function(t){var e="00"+Math.floor(t/60),i="00"+Math.floor(t%60);return"".concat(e.slice(-2),":").concat(i.slice(-2))},isMoving:function(){return null!==this.controlsMovementInterval},stopMoving:function(){null!==this.controlsMovementInterval&&(clearInterval(this.controlsMovementInterval),this.controlsMovementInterval=null)},showControls:function(){this.moveControlsTo(0,.2,1/60)},showEndScreen:function(){var t=document.body.querySelector(".share-video");if(t){var e=t.querySelector(".reload");e&&(e.style.display="block"),t.style.display="block"}},hideControls:function(){this.moveControlsTo(-55,.4,1/60)},moveControlsTo:function(t,e,i){this.isMoving()&&this.stopMoving();var n=this.updateControlsPosition;this.controlsMovementInterval=setInterval(function(){n(t,e,i)},1e3*i)},updateControlsPosition:function(t,e,i){if(null!=this.controls){var n=parseFloat(this.controls.style.bottom);if(t<0&&n<=t)this.stopMoving();else if(0<=t&&t<=n)this.stopMoving();else{var o=t<0?-1:1,s=n+55/e*i*o;s=o<0?Math.max(s,t):Math.min(s,t),this.controls.style.bottom=s+"px"}}},startProgressAnimation:function(){this.progressAnimator=setInterval(this.moveProgressBar,1e3/60)},stopProgressAnimation:function(){clearInterval(this.progressAnimator),this.progressAnimator=null},moveProgressBar:function(){var t=this.video.duration,e=this.video.currentTime;this.controls&&(this.controls.querySelector(".progress").style.width=100*e/t+"%")}})},function(t,e,i){t.exports=function(i){function n(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}var o={};return n.m=i,n.c=o,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,i){"use strict";function n(t){var e=new b,i=function(i,t,n){h("listener called"),i.success=!0,t.forEach(function(t,e){n.clipboardData.setData(e,t),e===m&&n.clipboardData.getData(e)!=t&&(h("setting text/plain failed"),i.success=!1)}),n.preventDefault()}.bind(this,e,t);document.addEventListener("copy",i);try{document.execCommand("copy")}finally{document.removeEventListener("copy",i)}return e.success}function o(t,e){s(t);var i=n(e);return r(),i}function s(t){var e=document.getSelection(),i=document.createRange();i.selectNodeContents(t),e.removeAllRanges(),e.addRange(i)}function r(){document.getSelection().removeAllRanges()}function l(t){var e=new d.DT;return e.setData(m,t),e}function a(){return"undefined"==typeof ClipboardEvent&&void 0!==window.clipboardData&&void 0!==window.clipboardData.setData}var u=this&&this.__awaiter||function(s,r,l,a){return new(l||(l=Promise))(function(t,e){function i(t){try{o(a.next(t))}catch(t){e(t)}}function n(t){try{o(a.throw(t))}catch(t){e(t)}}function o(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(i,n)}o((a=a.apply(s,r||[])).next())})},c=this&&this.__generator||function(i,n){function t(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,s&&(r=s[2&e[0]?"return":e[0]?"throw":"next"])&&!(r=r.call(s,e[1])).done)return r;switch(s=0,r&&(e=[0,r.value]),e[0]){case 0:case 1:r=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,s=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(r=0<(r=l.trys).length&&r[r.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!r||e[1]>r[0]&&e[1]<r[3])){l.label=e[1];break}if(6===e[0]&&l.label<r[1]){l.label=r[1],r=e;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(e);break}r[2]&&l.ops.pop(),l.trys.pop();continue}e=n.call(i,l)}catch(t){e=[6,t],s=0}finally{o=r=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}var o,s,r,e,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e};Object.defineProperty(e,"__esModule",{value:!0});var d=i(1),h=function(t){},v=!0,p=function(){(console.warn||console.log).apply(console,arguments)}.bind("[clipboard-polyfill]"),m="text/plain",f=function(){function t(){}return t.setDebugLog=function(t){h=t},t.suppressWarnings=function(){v=!1,d.suppressDTWarnings()},t.write=function(i){return u(this,void 0,void 0,function(){var e;return c(this,function(t){if(v&&!i.getData(m)&&p("clipboard.write() was called without a `text/plain` data type. On some platforms, this may result in an empty clipboard. Call clipboard.suppressWarnings() to suppress this warning."),a()){if(function(t){var e=t.getData(m);if(void 0!==e)return window.clipboardData.setData("Text",e);throw"No `text/plain` value was specified."}(i))return[2];throw"Copying failed, possibly because the user rejected it."}if(n(i))return h("regular execCopy worked"),[2];if(-1<navigator.userAgent.indexOf("Edge"))return h('UA "Edge" => assuming success'),[2];if(o(document.body,i))return h("copyUsingTempSelection worked"),[2];if(function(t){var e=document.createElement("div");e.setAttribute("style","-webkit-user-select: text !important"),e.textContent="temporary element",document.body.appendChild(e);var i=o(e,t);return document.body.removeChild(e),i}(i))return h("copyUsingTempElem worked"),[2];if(void 0!==(e=i.getData(m))&&function(t){h("copyTextUsingDOM");var e=document.createElement("div");e.setAttribute("style","-webkit-user-select: text !important");var i=e;e.attachShadow&&(h("Using shadow DOM."),i=e.attachShadow({mode:"open"}));var n=document.createElement("span");n.innerText=t,i.appendChild(n),document.body.appendChild(e),s(n);var o=document.execCommand("copy");return r(),document.body.removeChild(e),o}(e))return h("copyTextUsingDOM worked"),[2];throw"Copy command failed."})})},t.writeText=function(e){return u(this,void 0,void 0,function(){return c(this,function(t){return navigator.clipboard&&navigator.clipboard.writeText?(h("Using `navigator.clipboard.writeText()`."),[2,navigator.clipboard.writeText(e)]):[2,this.write(l(e))]})})},t.read=function(){return u(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return e=l,[4,this.readText()];case 1:return[2,e.apply(void 0,[t.sent()])]}})})},t.readText=function(){return u(this,void 0,void 0,function(){return c(this,function(t){if(navigator.clipboard&&navigator.clipboard.readText)return h("Using `navigator.clipboard.readText()`."),[2,navigator.clipboard.readText()];if(a())return h("Reading text using IE strategy."),[2,function(){return u(this,void 0,void 0,function(){var e;return c(this,function(t){if(""===(e=window.clipboardData.getData("Text")))throw"Empty clipboard or could not read plain text from clipboard";return[2,e]})})}()];throw"Read is not supported in your browser."})})},t.DT=d.DT,t}();e.default=f;var b=function(){this.success=!1};t.exports=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=["text/plain","text/html"],o=function(){(console.warn||console.log).call(arguments)}.bind(console,"[clipboard-polyfill]"),s=!0;e.suppressDTWarnings=function(){s=!1};var r=function(){function t(){this.m={}}return t.prototype.setData=function(t,e){s&&-1===n.indexOf(t)&&o("Unknown data type: "+t,"Call clipboard.suppressWarnings() to suppress this warning."),this.m[t]=e},t.prototype.getData=function(t){return this.m[t]},t.prototype.forEach=function(t){for(var e in this.m)t(this.m[e],e)},t}();e.DT=r}])},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){i(255),i(256),i(269),i(287),i(315),i(330),i(344),i(345),i(346),i(347),i(348)},function(t,e,i){t.exports=i.p+"assets/styles/experience.less"},function(t,e,i){i(257),i(258),i(259),i(260),i(261),i(262),i(263),i(264),i(265),i(266),i(267),i(268)},function(t,e,i){t.exports=i.p+"assets/styles/webfonts.icons.less"},function(t,e,i){t.exports=i.p+"assets/styles/icons.less"},function(t,e,i){t.exports=i.p+"assets/webfonts/lucidweb.eot?2f15e74ca000c5e34502c9a6833d9286"},function(t,e,i){t.exports=i.p+"assets/webfonts/lucidweb.ttf?93286ca76d9b71018daf990ab45cb38a"},function(t,e,i){t.exports=i.p+"assets/webfonts/lucidweb.woff?cf6cf5e8203f021fd4166aa7b617ff8b"},function(t,e,i){t.exports=i.p+"assets/webfonts/lucidweb.woff2?11e79997b9f0ca3cfc8237b56536ec86"},function(t,e,i){t.exports=i.p+"assets/webfonts/lucidweb.svg?2629e4fb4277968e08fe2d941865eddb"},function(t,e,i){t.exports=i.p+"assets/webfonts/lucidweb_test.eot?c82b23daf700cc963b2e8c247fcb9f8c"},function(t,e,i){t.exports=i.p+"assets/webfonts/lucidweb_test.ttf?9722bc4edaa5a682185c5da6c7233b47"},function(t,e,i){t.exports=i.p+"assets/webfonts/lucidweb_test.woff?d7a4b8661658858230f538b8ddbafa1f"},function(t,e,i){t.exports=i.p+"assets/webfonts/lucidweb_test.woff2?b085795a6ce9b4f665cded6a4d573977"},function(t,e,i){t.exports=i.p+"assets/webfonts/lucidweb_test.svg?deb834a11a67e484366c7745d2114540"},function(t,e,i){i(270),i(271),i(272),i(273),i(274),i(275),i(276),i(277),i(278),i(279),i(88),i(25),i(89),i(280),i(281),i(282),i(283),i(284),i(285),i(286),i(90)},function(t,e,i){i(88),AFRAME.registerPrimitive("experience-state-starts",{defaultComponents:{"listen-for-parent-event":{event:"lucidweb.experience-state.started"},"enable-children":{}},mappings:{}})},function(t,e,i){i(89),AFRAME.registerPrimitive("experience-state",{defaultComponents:{"experience-state-controller":{}},mappings:{name:"experience-state-controller.name"}})},function(t,e){AFRAME.registerPrimitive("experience-state-stops",{defaultComponents:{"listen-for-parent-event":{event:"lucidweb.experience-state.stopped"},"enable-children":{}},mappings:{}})},function(t,e,i){i(25),AFRAME.registerPrimitive("on-loaded",{defaultComponents:{"listen-for-scene-event":{event:"loaded"},"enable-children":{}}})},function(t,e,i){i(25),AFRAME.registerPrimitive("on-click",{defaultComponents:{"listen-for-parent-event":{event:"click"},"enable-children":{}}})},function(t,e){AFRAME.registerPrimitive("on-custom-event",{defaultComponents:{"on-custom-event":{},"enable-children":{}},mappings:{event:"on-custom-event.event",origin:"on-custom-event.origin"}})},function(t,e){AFRAME.registerPrimitive("enable-entity",{defaultComponents:{"enable-entity":{}},mappings:{target:"enable-entity.target"}})},function(t,e){AFRAME.registerPrimitive("disable-entity",{defaultComponents:{"disable-entity":{}},mappings:{target:"disable-entity.target"}})},function(t,e,i){i(25),AFRAME.registerPrimitive("on-mouseenter",{defaultComponents:{"listen-for-parent-event":{event:"mouseenter"},"enable-children":{}}})},function(t,e,i){i(25),AFRAME.registerPrimitive("on-mouseleave",{defaultComponents:{"listen-for-parent-event":{event:"mouseleave"},"enable-children":{}}})},function(t,e,i){"use strict";i.r(e);var n=i(22);AFRAME.registerComponent("enable",Object(n.a)({schema:{type:"selector"},onEventTriggered:function(t){this.data&&this.data.emit("lucidweb.enable",{},!1)}}))},function(t,e,i){"use strict";i.r(e);var n=i(22);AFRAME.registerComponent("enable-children",Object(n.a)({onEventTriggered:function(){for(var t=this.el.children.length,e=0;e<t;e++)this.el.children[e].emit?this.el.children[e].emit("lucidweb.enable",{},!1):console.warn("Cannot enable children (emit function is missing)  PS: did you forget to define a custom primitive?")}}))},function(t,e,i){"use strict";i.r(e);var n=i(22);AFRAME.registerComponent("transition-to",Object(n.a)({schema:{type:"selector"},onEventTriggered:function(){console.warn("TRANSITION TO THANK YOU")}}))},function(t,e,i){"use strict";i.r(e);var n=i(5);AFRAME.registerComponent("enable-entity",Object(n.a)({schema:{target:{type:"selector"}},onEnable:function(){var t=this.data;t.target&&t.target.emit("lucidweb.enable",{},!1)}}))},function(t,e,i){"use strict";i.r(e);var n=i(5);AFRAME.registerComponent("disable-entity",Object(n.a)({schema:{target:{type:"selector"}},onEnable:function(){var t=this.data;t.target&&t.target.emit("lucidweb.disable",{},!1)}}))},function(t,e){AFRAME.registerComponent("on-custom-event",{multiple:!0,schema:{event:{type:"string"},origin:{type:"selector"}},init:function(){this.bindMethods(),this.addEventListeners()},remove:function(){this.removeEventListeners()},bindMethods:function(){this.onEventTriggered=AFRAME.utils.bind(this.onEventTriggered,this)},addEventListeners:function(){this.data.origin?this.data.origin.addEventListener(this.data.event,this.onEventTriggered):this.el.parentEl.addEventListener(this.data.event,this.onEventTriggered)},removeEventListeners:function(){this.data.origin?this.data.origin.removeEventListeners(this.data.event,this.onEventTriggered):this.el.parentEl.removeEventListeners(this.data.event,this.onEventTriggered)},onEventTriggered:function(t){this.el.emit("lucidweb.event.triggered",{msg:"Parent event triggered: "+this.data.event},!1)}})},function(t,e){AFRAME.registerComponent("enable-ios-video",{schema:{startButton:{type:"selector"}},init:function(){this.bindMethods()},bindMethods:function(){this.onStartButtonClicked=AFRAME.utils.bind(this.onStartButtonClicked,this)},play:function(){this.displayStartScreen()},remove:function(){this.removeDisplayScreen()},onStartButtonClicked:function(t){this.data;for(var e=document.querySelectorAll("video"),i=0;i<e.length;i++)e[i].play().then().catch(console.log),e[i].pause()},removeDisplayScreen:function(){},displayStartScreen:function(){var t=this.data;t.startButton&&t.startButton.addEventListener("click",this.onStartButtonClicked)}})},function(t,e,i){i(288),i(289),i(290).polyfill(),i(291),i(293),i(294),i(295),i(296),i(297),i(298),i(299),i(300),i(301),i(302),i(303),i(304),i(305),i(306),i(307),i(308),i(91),i(309),i(310),i(311),i(312),i(313),i(93),i(314),i(92)},function(t,e,i){t.exports=i.p+"assets/images/assist-cardboard-background.jpg?55dff3dfe512c120f4400bb7a76bc59b"},function(t,e,i){t.exports=i.p+"assets/styles/video.less"},function(t,e,i){(function(j,N){t.exports=function(){"use strict";function u(t){return"function"==typeof t}var i=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},n=0,e=void 0,o=void 0,l=function(t,e){h[n]=t,h[n+1]=e,2===(n+=2)&&(o?o(v):y())},t="undefined"!=typeof window?window:void 0,s=t||{},r=s.MutationObserver||s.WebKitMutationObserver,a="undefined"==typeof self&&void 0!==j&&"[object process]"==={}.toString.call(j),c="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function d(){var t=setTimeout;return function(){return t(v,1)}}var h=new Array(1e3);function v(){for(var t=0;t<n;t+=2){var e=h[t],i=h[t+1];e(i),h[t]=void 0,h[t+1]=void 0}n=0}var p,m,f,b,y=void 0;function g(t,e){var i=this,n=new this.constructor(C);void 0===n[A]&&I(n);var o=i._state;if(o){var s=arguments[o-1];l(function(){return D(o,n,s,i._result)})}else O(i,n,t,e);return n}function E(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(C);return L(e,t),e}y=a?function(){return j.nextTick(v)}:r?(m=0,f=new r(v),b=document.createTextNode(""),f.observe(b,{characterData:!0}),function(){b.data=m=++m%2}):c?((p=new MessageChannel).port1.onmessage=v,function(){return p.port2.postMessage(0)}):void 0===t?function(){try{var t=Function("return this")().require("vertx");return void 0===(e=t.runOnLoop||t.runOnContext)?d():function(){e(v)}}catch(t){return d()}}():d();var A=Math.random().toString(36).substring(2);function C(){}var w=void 0,V=1,M=2,k={error:null};function B(t){try{return t.then}catch(t){return k.error=t,k}}function P(t,e,i,n){try{t.call(e,i,n)}catch(t){return t}}function x(t,e,i){var n,o,s,r;e.constructor===t.constructor&&i===g&&e.constructor.resolve===E?(s=t,(r=e)._state===V?R(s,r._result):r._state===M?T(s,r._result):O(r,void 0,function(t){return L(s,t)},function(t){return T(s,t)})):i===k?(T(t,k.error),k.error=null):void 0===i?R(t,e):u(i)?(n=e,o=i,l(function(e){var i=!1,t=P(o,n,function(t){i||(i=!0,n!==t?L(e,t):R(e,t))},function(t){i||(i=!0,T(e,t))},e._label);!i&&t&&(i=!0,T(e,t))},t)):R(t,e)}function L(t,e){var i,n;t===e?T(t,new TypeError("You cannot resolve a promise with itself")):(n=typeof(i=e),null===i||"object"!==n&&"function"!==n?R(t,e):x(t,e,B(e)))}function S(t){t._onerror&&t._onerror(t._result),F(t)}function R(t,e){t._state===w&&(t._result=e,t._state=V,0!==t._subscribers.length&&l(F,t))}function T(t,e){t._state===w&&(t._state=M,t._result=e,l(S,t))}function O(t,e,i,n){var o=t._subscribers,s=o.length;t._onerror=null,o[s]=e,o[s+V]=i,o[s+M]=n,0===s&&t._state&&l(F,t)}function F(t){var e=t._subscribers,i=t._state;if(0!==e.length){for(var n=void 0,o=void 0,s=t._result,r=0;r<e.length;r+=3)n=e[r],o=e[r+i],n?D(i,n,o,s):o(s);t._subscribers.length=0}}function D(t,e,i,n){var o=u(i),s=void 0,r=void 0,l=void 0,a=void 0;if(o){if((s=function(t,e){try{return t(e)}catch(t){return k.error=t,k}}(i,n))===k?(a=!0,r=s.error,s.error=null):l=!0,e===s)return void T(e,new TypeError("A promises callback cannot return that same promise."))}else s=n,l=!0;e._state!==w||(o&&l?L(e,s):a?T(e,r):t===V?R(e,s):t===M&&T(e,s))}var _=0;function I(t){t[A]=_++,t._state=void 0,t._result=void 0,t._subscribers=[]}var z=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(C),this.promise[A]||I(this.promise),i(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?R(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&R(this.promise,this._result))):T(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===w&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(e,t){var i=this._instanceConstructor,n=i.resolve;if(n===E){var o=B(e);if(o===g&&e._state!==w)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(i===q){var s=new i(C);x(s,e,o),this._willSettleAt(s,t)}else this._willSettleAt(new i(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},t.prototype._settledAt=function(t,e,i){var n=this.promise;n._state===w&&(this._remaining--,t===M?T(n,i):this._result[e]=i),0===this._remaining&&R(n,this._result)},t.prototype._willSettleAt=function(t,e){var i=this;O(t,void 0,function(t){return i._settledAt(V,e,t)},function(t){return i._settledAt(M,e,t)})},t}(),q=function(){function e(t){this[A]=_++,this._result=this._state=void 0,this._subscribers=[],C!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(e,t){try{t(function(t){L(e,t)},function(t){T(e,t)})}catch(t){T(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var i=this.constructor;return u(e)?this.then(function(t){return i.resolve(e()).then(function(){return t})},function(t){return i.resolve(e()).then(function(){throw t})}):this.then(e,e)},e}();return q.prototype.then=g,q.all=function(t){return new z(this,t).promise},q.race=function(o){var s=this;return i(o)?new s(function(t,e){for(var i=o.length,n=0;n<i;n++)s.resolve(o[n]).then(t,e)}):new s(function(t,e){return e(new TypeError("You must pass an array to race."))})},q.resolve=E,q.reject=function(t){var e=new this(C);return T(e,t),e},q._setScheduler=function(t){o=t},q._setAsap=function(t){l=t},q._asap=l,q.polyfill=function(){var t=void 0;if(void 0!==N)t=N;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var i=null;try{i=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===i&&!e.cast)return}t.Promise=q},q.Promise=q}()}).call(this,i(10),i(7))},function(t,e,i){i(91),AFRAME.registerPrimitive("video-controller",{defaultComponents:{"video-controller":{}},mappings:{src:"video-controller.src",autoplay:"video-controller.autoplay"}})},function(t,e){AFRAME.registerComponent("idle",{schema:{timeout:{type:"number",default:3},idle:{type:"boolean",default:!1}},init:function(){this.bindMethods(),this.idleTimeout=null},bindMethods:function(){this.onMouseMove=AFRAME.utils.bind(this.onMouseMove,this),this.onMouseMoveTimeout=AFRAME.utils.bind(this.onMouseMoveTimeout,this)},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){this.removeEventListeners()},update:function(t){var e=this.data;t.idle!==e.idle&&(e.idle?this.el.sceneEl.emit("lucidweb.mouse.idle",{},!1):this.el.sceneEl.emit("lucidweb.mouse.moving",{},!1))},addEventListeners:function(){document.addEventListener("mousemove",this.onMouseMove)},removeEventListeners:function(){document.removeEventListener("mousemove",this.onMouseMove)},onMouseMove:function(){var t=this.data;null!==this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!0===this.data.idle&&this.el.setAttribute("idle",{idle:!1}),this.idleTimeout=setTimeout(this.onMouseMoveTimeout,1e3*t.timeout)},onMouseMoveTimeout:function(){this.idleTimeout=null,!1===this.data.idle&&this.el.setAttribute("idle",{idle:!0})}})},function(t,e){AFRAME.registerPrimitive("start-video",{defaultComponents:{"start-video":{}},mappings:{video:"start-video.video"}})},function(t,e){AFRAME.registerPrimitive("end-video",{defaultComponents:{"end-video":{}},mappings:{controller:"end-video.controller"}})},function(t,e){AFRAME.registerPrimitive("stop-video",{defaultComponents:{"stop-video":{}},mappings:{video:"stop-video.video"}})},function(t,e){AFRAME.registerPrimitive("play-video",{defaultComponents:{"play-video":{}},mappings:{controller:"play-video.controller"}})},function(t,e){AFRAME.registerPrimitive("mute-video",{defaultComponents:{"mute-video":{}},mappings:{video:"mute-video.video",speed:"mute-video.speed"}})},function(t,e){AFRAME.registerPrimitive("flat-video-controls",{defaultComponents:{"flat-video-controls":{}},mappings:{video:"flat-video-controls.video",width:"flat-video-controls.width","button-width":"flat-video-controls.buttonWidth","button-depth":"flat-video-controls.buttonDepth","exit-target":"flat-video-controls.exitTarget"}})},function(t,e){AFRAME.registerPrimitive("play-audio",{defaultComponents:{"play-audio":{}},mappings:{audio:"play-audio.audio"}})},function(t,e){AFRAME.registerPrimitive("pause-audio",{defaultComponents:{"pause-audio":{}},mappings:{audio:"pause-audio.audio"}})},function(t,e){AFRAME.registerPrimitive("on-video-closed",{defaultComponents:{"listen-for-parent-event":{event:"lucidweb.video.closed"},"enable-children":{}}})},function(t,e){AFRAME.registerPrimitive("on-video-ended",{defaultComponents:{"listen-for-parent-event":{event:"lucidweb.video.ended"},"enable-children":{}}})},function(t,e){AFRAME.registerPrimitive("desktop-videosphere-controls",{defaultComponents:{"desktop-videosphere-controls":{}},mappings:{video:"desktop-videosphere-controls.video"}})},function(t,e,i){"use strict";i.r(e);var n=i(5);AFRAME.registerComponent("start-video",Object(n.a)({schema:{video:{type:"selector"}},onEnable:function(){var t=this.data;t.video&&(this.el.setAttribute("video-can-play",!0),t.video.currentTime=0,t.video.play())}}))},function(t,e,i){"use strict";i.r(e);var n=i(5);AFRAME.registerComponent("end-video",Object(n.a)({schema:{controller:{type:"selector"}},onEnable:function(){var t=this.data;if(t.controller){console.log("end video: "+t.controller.getAttribute("video"));var e=document.querySelector(t.controller.getAttribute("video"));t.controller.setAttribute("video-can-play",!1),e.pause()}}}))},function(t,e,i){"use strict";i.r(e);var n=i(5);AFRAME.registerComponent("play-video",Object(n.a)({schema:{controller:{type:"selector"}},onEnable:function(){this.data.controller.components["video-controller"].playVideo()}}))},function(t,e,i){"use strict";i.r(e);var n=i(5);AFRAME.registerComponent("stop-video",Object(n.a)({schema:{video:{type:"selector"}},onEnable:function(){this.data.video.pause()}}))},function(t,e,i){"use strict";i.r(e);var n=i(5);AFRAME.registerComponent("mute-video",Object(n.a)({schema:{video:{type:"selector"},speed:{type:"number",default:300}},originalInit:function(){this.intervalSteps=1e3/60,this.intervalPointer=null,this.volumeSteps=1},originalBindMethods:function(){},onEnable:function(){var t=this.data;if(t.video){t.video.volume;this.volumeSteps=t.speed/this.intervalsteps,this.intervalPointer=setInterval(this.reduceVolume,t.speed)}},reduceVolume:function(){var t=this.data,e=t.video.volume-this.volumeSteps;t.video.volume=Math.max(0,e)}}))},function(t,e){AFRAME.registerComponent("flat-video-controls",{schema:{video:{type:"selector"},width:{type:"number"},buttonWidth:{type:"number",default:1.6},buttonDepth:{type:"number",default:.01},exitTarget:{type:"selector"}},init:function(){this.bindMethods(),this.controls=null,this.playButton=null,this.pauseButton=null,this.replayButton=null,this.volumeOffButton=null,this.volumeOnButton=null,this.closeButton=null,this.timeProgress=null,this.timeDuration=null,this.scrollbar=null,this.videoTimingDisplay=null,this.timeProgress=null,this.timeDisplaySeparator=null,this.timeDuration=null},play:function(){this.controls=this.createControls(),this.el.appendChild(this.controls),this.addEventListeners()},remove:function(){this.removeEventListeners()},bindMethods:function(){var t=AFRAME.utils.bind;this.addEventListeners=t(this.addEventListeners,this),this.removeEventListeners=t(this.removeEventListeners,this),this.__formatTime=t(this.__formatTime,this),this.createControls=t(this.createControls,this),this.createPlayButton=t(this.createPlayButton,this),this.createPauseButton=t(this.createPauseButton,this),this.createReplayButton=t(this.createReplayButton,this),this.createVolumeOnButton=t(this.createVolumeOnButton,this),this.createVolumeOffButton=t(this.createVolumeOffButton,this),this.createCloseButton=t(this.createCloseButton,this),this.createVideoTimingDisplay=t(this.createVideoTimingDisplay,this),this.createVideoProgressDisplay=t(this.createVideoProgressDisplay,this),this.createVideoDurationDisplay=t(this.createVideoDurationDisplay,this),this.createBackToMenuButton=t(this.createBackToMenuButton,this),this.onVideoPlayingStarted=t(this.onVideoPlayingStarted,this),this.onVideoControllerPlayingEnded=t(this.onVideoControllerPlayingEnded,this),this.onVideoControllerStalled=t(this.onVideoControllerStalled,this),this.onVideoControllerPlayingPaused=t(this.onVideoControllerPlayingPaused,this),this.onVideoControllerPlaying=t(this.onVideoControllerPlaying,this),this.onVideoControllerVolumeOff=t(this.onVideoControllerVolumeOff,this),this.onVideoControllerVolumeOn=t(this.onVideoControllerVolumeOn,this),this.onVideoControllerTimeUpdate=t(this.onVideoControllerTimeUpdate,this),this.onPlayButtonClicked=t(this.onPlayButtonClicked,this),this.onReplayButtonClicked=t(this.onReplayButtonClicked,this),this.onPauseButtonClicked=t(this.onPauseButtonClicked,this),this.onVideoControllerChange=t(this.onVideoControllerChange,this),this.onVolumeOnButtonClicked=t(this.onVolumeOnButtonClicked,this),this.onVolumeOffButtonClicked=t(this.onVolumeOffButtonClicked,this),this.closeButtonClicked=t(this.closeButtonClicked,this),this.videoControllerSystem=t(this.videoControllerSystem,this)},addEventListeners:function(){this.el;var t=this.data.video;t.addEventListener("canplay",this.onVideoPlayingStarted),t.addEventListener("timeupdate",this.onVideoControllerTimeUpdate),t.addEventListener("ended",this.onVideoControllerPlayingEnded),t.addEventListener("volumechange",this.onVideoControllerChange),t.addEventListener("pause",this.onVideoControllerPlayingPaused),t.addEventListener("playing",this.onVideoControllerPlaying),this.playButton.addEventListener("click",this.onPlayButtonClicked),this.replayButton.addEventListener("click",this.onReplayButtonClicked),this.pauseButton.addEventListener("click",this.onPauseButtonClicked),this.volumeOnButton.addEventListener("click",this.onVolumeOnButtonClicked),this.volumeOffButton.addEventListener("click",this.onVolumeOffButtonClicked),this.closeButton.addEventListener("click",this.closeButtonClicked)},removeEventListeners:function(){var t=this.el.sceneEl;t.removeEventListener("lucidweb.video-controller.playing-started",this.onVideoPlayingStarted),t.removeEventListener("lucidweb.video-controller.playing-ended",this.onVideoControllerPlayingEnded),t.removeEventListener("lucidweb.video-controller.video-paused",this.onVideoControllerPlayingPaused),t.removeEventListener("lucidweb.video-controller.video-playing",this.onVideoControllerPlaying),t.removeEventListener("lucidweb.video-controller.volume-off",this.onVideoControllerVolumeOff),t.removeEventListener("lucidweb.video-controller.volume-on",this.onVideoControllerVolumeOn),t.removeEventListener("lucidweb.video-controller.timeupdate",this.onVideoControllerTimeUpdate),this.activator.removeEventListener("click",this.onActivateButtonClicked),this.playButton.removeEventListener("click",this.onPlayButtonClicked),this.replayButton.removeEventListener("click",this.onReplayButtonClicked),this.pauseButton.removeEventListener("click",this.onPauseButtonClicked),this.volumeOnButton.removeEventListener("click",this.onVolumeOnButtonClicked),this.volumeOffButton.removeEventListener("click",this.onVolumeOffButtonClicked),this.closeButton.removeEventListener("click",this.closeButtonClicked)},videoControllerSystem:function(){return this.el.sceneEl.systems["video-controller"]},onVideoPlayingStarted:function(t){var e=this.pauseButton.getAttribute("position");this.pauseButton.setAttribute("position",{x:-.78,y:e.y,z:.001}),this.playButton.setAttribute("position",{x:-.78,y:e.y,z:1e3}),this.replayButton.setAttribute("position",{x:-.78,y:e.y,z:1e3})},onVideoControllerPlayingEnded:function(t){var e=this.pauseButton.getAttribute("position");this.pauseButton.setAttribute("position",{x:-.78,y:e.y,z:1e3}),this.playButton.setAttribute("position",{x:-.78,y:e.y,z:1e3}),this.replayButton.setAttribute("position",{x:-.78,y:e.y,z:.001})},onVideoControllerStalled:function(t){var e=this.data.video;e&&e.play()},onVideoControllerPlayingPaused:function(t){var e=this.pauseButton.getAttribute("position");this.pauseButton.setAttribute("position",{x:-.78,y:e.y,z:1e3}),this.playButton.setAttribute("position",{x:-.78,y:e.y,z:.001}),this.replayButton.setAttribute("position",{x:-.78,y:e.y,z:1e3})},onVideoControllerPlaying:function(t){var e=this.pauseButton.getAttribute("position");this.pauseButton.setAttribute("position",{x:-.78,y:e.y,z:.001}),this.playButton.setAttribute("position",{x:-.78,y:e.y,z:1e3}),this.replayButton.setAttribute("position",{x:-.78,y:e.y,z:1e3})},onVideoControllerChange:function(t){!0===this.data.video.muted?this.onVideoControllerVolumeOn(t):this.onVideoControllerVolumeOff(t)},onVideoControllerVolumeOff:function(t){var e=this.volumeOnButton.getAttribute("position");this.volumeOnButton.setAttribute("position",{x:-.58,y:e.y,z:1e3}),this.volumeOffButton.setAttribute("position",{x:-.58,y:e.y,z:.001})},onVideoControllerVolumeOn:function(t){var e=this.volumeOnButton.getAttribute("position");this.volumeOnButton.setAttribute("position",{x:-.58,y:e.y,z:.001}),this.volumeOffButton.setAttribute("position",{x:-.58,y:e.y,z:1e3})},onVideoControllerTimeUpdate:function(t){var e=this.data.video,i=this.__formatTime(e.currentTime),n=this.__formatTime(e.duration);this.timeProgress.setAttribute("text",{value:i}),this.timeDuration.setAttribute("text",{value:n})},__formatTime:function(t){var e="00"+Math.floor(t/60),i="00"+Math.floor(t%60);return"".concat(e.slice(-2),":").concat(i.slice(-2))},onPlayButtonClicked:function(t){var e=this.data;this.el;e.video.setAttribute("video-can-play",!0),e.video&&e.video.play()},onReplayButtonClicked:function(t){var e=this.data;this.el;e.video.setAttribute("video-can-play",!0),e.video&&(e.video.currentTime=0,e.video.play())},onPauseButtonClicked:function(t){var e=this.data;this.el;e.video.setAttribute("video-can-play",!1),e.video&&e.video.pause()},onVolumeOnButtonClicked:function(t){var e=this.data;e.video&&(e.video.muted=!1)},onVolumeOffButtonClicked:function(t){var e=this.data;e.video&&(e.video.muted=!0)},closeButtonClicked:function(t){var e=this.data;this.el;e.video.setAttribute("video-can-play",!1),e.exitTarget&&e.exitTarget.emit("lucidweb.disable")},onScrollbarClicked:function(t){},onScrollbarHoverStart:function(t){},onScrollbarHoverEnd:function(t){},onRaycastIntersection:function(t){},onRaycastIntersectionCleared:function(t){},createControls:function(){var t=this.data;return this.controls=document.createElement("a-entity"),this.controls.setAttribute("geometry",{primitive:"box",width:t.width,height:t.buttonWidth,depth:t.buttonDepth}),this.controls.setAttribute("material",{color:"#333"}),this.controls.appendChild(this.createPlayButton()),this.controls.appendChild(this.createPauseButton()),this.controls.appendChild(this.createReplayButton()),this.controls.appendChild(this.createVolumeOnButton()),this.controls.appendChild(this.createVolumeOffButton()),this.controls.appendChild(this.createCloseButton()),this.controls.appendChild(this.createVideoTimingDisplay()),this.controls},createPlayButton:function(){var t=this.data;return this.playButton=document.createElement("ui-button"),this.playButton.setAttribute("icon","play"),this.playButton.className="clickable",this.playButton.setAttribute("position","-0.78 0 0.001"),this.playButton.setAttribute("depth",t.buttonDepth),this.playButton.setAttribute("size",t.buttonWidth),this.playButton},createPauseButton:function(){var t=this.data;return this.pauseButton=document.createElement("ui-button"),this.pauseButton.setAttribute("icon","pause"),this.pauseButton.className="clickable",this.pauseButton.setAttribute("position","-0.78 0 1000"),this.pauseButton.setAttribute("depth",t.buttonDepth),this.pauseButton.setAttribute("size",t.buttonWidth),this.pauseButton},createReplayButton:function(){var t=this.data;return this.replayButton=document.createElement("ui-button"),this.replayButton.setAttribute("icon","reload"),this.replayButton.className="clickable",this.replayButton.setAttribute("position","-0.78 0 1000"),this.replayButton.setAttribute("depth",t.buttonDepth),this.replayButton.setAttribute("size",t.buttonWidth),this.replayButton},createVolumeOnButton:function(){var t=this.data;return this.volumeOnButton=document.createElement("ui-button"),this.volumeOnButton.setAttribute("icon","mute"),this.volumeOnButton.className="clickable",this.volumeOnButton.setAttribute("position","-0.58 0 1000"),this.volumeOnButton.setAttribute("depth",t.buttonDepth),this.volumeOnButton.setAttribute("size",t.buttonWidth),this.volumeOnButton},createVolumeOffButton:function(){var t=this.data;return this.volumeOffButton=document.createElement("ui-button"),this.volumeOffButton.setAttribute("icon","volume"),this.volumeOffButton.className="clickable",this.volumeOffButton.setAttribute("position","-0.58 0 0.001"),this.volumeOffButton.setAttribute("depth",t.buttonDepth),this.volumeOffButton.setAttribute("size",t.buttonWidth),this.volumeOffButton},createCloseButton:function(){var t=this.data;return this.closeButton=document.createElement("ui-button"),this.closeButton.setAttribute("icon","arrow_left"),this.closeButton.className="clickable",this.closeButton.setAttribute("position","0.79 0 0.001"),this.closeButton.setAttribute("depth",t.buttonDepth),this.closeButton.setAttribute("size",t.buttonWidth),this.closeButton},createVideoTimingDisplay:function(){return this.videoTimingDisplay=document.createElement("a-text"),this.videoTimingDisplay.appendChild(this.createVideoProgressDisplay()),this.videoTimingDisplay.appendChild(this.createVideoDisplaySeparator()),this.videoTimingDisplay.appendChild(this.createVideoDurationDisplay()),this.videoTimingDisplay},createVideoProgressDisplay:function(){var t=this.data;return this.timeProgress=document.createElement("a-text"),this.timeProgress.setAttribute("transparent",!0),this.timeProgress.setAttribute("opacity",.6),this.timeProgress.setAttribute("value","00:34"),this.timeProgress.setAttribute("align","left"),this.timeProgress.setAttribute("width",.8),this.timeProgress.setAttribute("position","-0.110 0 0.01"),this.timeProgress.setAttribute("depth",t.buttonDepth),this.timeProgress},createVideoDisplaySeparator:function(){var t=this.data;return this.timeDisplaySeparator=document.createElement("a-text"),this.timeDisplaySeparator.setAttribute("transparent",!0),this.timeDisplaySeparator.setAttribute("opacity",.6),this.timeDisplaySeparator.setAttribute("value","|"),this.timeDisplaySeparator.setAttribute("align","left"),this.timeDisplaySeparator.setAttribute("width",.8),this.timeDisplaySeparator.setAttribute("position","0 0 0.01"),this.timeDisplaySeparator.setAttribute("depth",t.buttonDepth),this.timeDisplaySeparator},createVideoDurationDisplay:function(){var t=this.data;return this.timeDuration=document.createElement("a-text"),this.timeDuration.setAttribute("transparent",!0),this.timeDuration.setAttribute("opacity",.6),this.timeDuration.setAttribute("value","00:54"),this.timeDuration.setAttribute("align","left"),this.timeDuration.setAttribute("width",.8),this.timeDuration.setAttribute("position","0.03 0 0.01"),this.timeDuration.setAttribute("depth",t.buttonDepth),this.timeDuration},createBackToMenuButton:function(){}})},function(t,e,i){"use strict";i.r(e);var n=i(5);AFRAME.registerComponent("play-audio",Object(n.a)({schema:{audio:{type:"selector"}},onEnable:function(){var t=this.data;t.audio&&t.audio.play()}}))},function(t,e,i){"use strict";i.r(e);var n=i(5);AFRAME.registerComponent("pause-audio",Object(n.a)({schema:{audio:{type:"selector"}},onEnable:function(){var t=this.data;t.audio&&t.audio.pause()}}))},function(t,e){AFRAME.registerComponent("video-can-play",{schema:{type:"boolean",defaultValue:!1},init:function(){this.bindMethods()},bindMethods:function(){var t=AFRAME.utils.bind;this.addEventListeners=t(this.addEventListeners,this),this.removeEventListeners=t(this.removeEventListeners,this),this.onPlay=t(this.onPlay,this)},play:function(){var t=this.data,e=this.el.getAttribute("video");this.addEventListeners(),this.system.editCanPlay(e,t)},remove:function(){this.removeEventListeners()},update:function(t){var e=this.data,i=this.el.getAttribute("video");this.system.editCanPlay(i,e)},addEventListeners:function(){var t=this.el;document.querySelector(t.getAttribute("video")).addEventListener("play",this.onPlay)},removeEventListeners:function(){var t=this.el;document.querySelector(t.getAttribute("video")).removeEventListener("play",this.onPlay)},onPlay:function(t){var e=this.el.getAttribute("video");!1===this.system.canPlay(e)&&(console.info("Attempt to play a video has been blocked: "+e),document.querySelector(e).pause())}})},function(t,e){AFRAME.registerComponent("desktop-videosphere-controls",{schema:{video:{type:"selector"}},init:function(){this.closeButton=null,this.enabled=!1,this.bindMethods()},play:function(){this.addEventListeners()},remove:function(){this.removeEventListeners()},bindMethods:function(){var t=AFRAME.utils.bind;this.addEventListeners=t(this.addEventListeners,this),this.removeEventListeners=t(this.removeEventListeners,this),this.onCloseButtonClicked=t(this.onCloseButtonClicked,this),this.onVideoEnded=t(this.onVideoEnded,this),this._createCloseButton=t(this._createCloseButton,this),this.onEnable=t(this.onEnable,this),this.onDisable=t(this.onDisable,this)},addEventListeners:function(){var t=this.data,e=this.el;e.addEventListener("lucidweb.enable",this.onEnable),e.addEventListener("lucidweb.disable",this.onDisable),t.video.addEventListener("ended",this.onVideoEnded)},removeEventListeners:function(){var t=this.data,e=this.el;e.removeEventListener("lucidweb.enable",this.onEnable),e.removeEventListener("lucidweb.disable",this.onDisable),t.video.removeEventListener("ended",this.onVideoEnded)},onEnable:function(){this.data;this.enabled=!0,this.closeButton=this._createCloseButton()},onDisable:function(){this.data;this.enabled=!1,document.querySelector(".a-enter-vr").removeChild(this.closeButton),this.closeButton=null},onCloseButtonClicked:function(t){this.enabled&&this.el.emit("lucidweb.video.closed")},onVideoEnded:function(t){this.enabled&&this.el.emit("lucidweb.video.ended")},_createCloseButton:function(){var t=document.createElement("a");t.className="desktop-video-close browser-only",t.addEventListener("click",this.onCloseButtonClicked);var e=document.createElement("span");return e.className="icon icon-arrow_left",t.appendChild(e),document.querySelector(".a-enter-vr").appendChild(t),t}})},function(t,e){AFRAME.registerSystem("video-can-play",{init:function(){this.bindMethods(),this.videos=[]},bindMethods:function(){var t=AFRAME.utils.bind;this.canPlay=t(this.canPlay,this),this.editCanPlay=t(this.editCanPlay,this)},editCanPlay:function(t,e){this.videos[t]=e},canPlay:function(t){return t in this.videos&&this.videos[t]}})},function(t,e,i){i(316),i(317),i(318),i(319),i(320),i(321),i(92),i(322),i(323),i(324),i(325),i(349),i(326),i(327),i(328),i(329),i(350)},function(t,e,i){t.exports=i.p+"assets/images/logo_lucidweb.png?f4ce1a9a18772e68281c96e70c787f09"},function(t,e,i){t.exports=i.p+"assets/styles/ui.general.less"},function(t,e,i){t.exports=i.p+"assets/styles/ui.branding.less"},function(t,e,i){t.exports=i.p+"assets/styles/ui.icon-rendering.less"},function(t,e){AFRAME.registerPrimitive("ui-icon",{defaultComponents:{"icon-renderer":{},geometry:{primitive:"plane"},material:{shader:"flat",transparent:!0,alphaTest:.2}},mappings:{name:"icon-renderer.name",height:"geometry.height",width:"geometry.width",color:"material.color"}})},function(t,e){AFRAME.registerPrimitive("ui-button",{defaultComponents:{"ui-button":{},"enable-children":{}},mappings:{width:"ui-button.width","button-width":"ui-button.buttonWidth",shape:"ui-button.shape",size:"ui-button.size",depth:"ui-button.depth",color:"ui-button.color",icon:"ui-button.icon",label:"ui-button.label",transparent:"ui-button.transparent",opacity:"ui-button.opacity",visible:"ui-button.visible","active-color":"ui-button.activeColor"}})},function(t,e){AFRAME.registerPrimitive("modify-property",{defaultComponents:{"modify-property":{}},mappings:{target:"modify-property.target",property:"modify-property.property",field:"modify-property.field",value:"modify-property.value"}})},function(t,e){AFRAME.registerComponent("all-controls",{schema:{visibility:{type:"string",default:"VR"}},init:function(){if(this.mode="browser",this.setVROnlyVisibility(!1),this.showLaserControls()){var t=document.createElement("a-entity");t.className="ray-caster",t.setAttribute("laser-controls",{hand:"right"}),t.setAttribute("raycaster","objects: .clickable;"),this.el.sceneEl.appendChild(t)}else this.el.setAttribute("look-controls",""),this.pointer=null,this.cursor=this.createDesktopCursor();this.bindMethods()},bindMethods:function(){var t=AFRAME.utils.bind;this.addEventListeners=t(this.addEventListeners,this),this.removeEventListeners=t(this.removeEventListeners,this),this.onEnterVR=t(this.onEnterVR,this),this.onExitVR=t(this.onExitVR,this),this.updateCursorVisibility=t(this.updateCursorVisibility,this),this.cursorVisibility=t(this.cursorVisibility,this),this.createDesktopCursor=t(this.createDesktopCursor,this),this.createVRCursor=t(this.createVRCursor,this)},addEventListeners:function(){this.el.sceneEl.addEventListener("enter-vr",this.onEnterVR),this.el.sceneEl.addEventListener("exit-vr",this.onExitVR)},removeEventListeners:function(){this.el.sceneEl.removeEventListener("enter-vr",this.onEnterVR),this.el.sceneEl.removeEventListener("exit-vr",this.onExitVR)},play:function(){this.el.sceneEl.renderer.antialias=!0;this.el;this.addEventListeners()},remove:function(){this.removeEventListeners()},isOculusGo:function(){return/Pacific Build.+OculusBrowser.+SamsungBrowser.+Mobile ?VR/i.test(window.navigator.userAgent)},showLaserControls:function(){return this.isOculusGo()||AFRAME.utils.device.checkHasPositionalTracking()},setVROnlyVisibility:function(t){var e=document.querySelectorAll(".vr-only"),i=!0,n=!1,o=void 0;try{for(var s,r=e[Symbol.iterator]();!(i=(s=r.next()).done);i=!0)el=s.value,el.tagName.includes("-")?el.setAttribute("visible",t):!0===t?el.style.visibility="visible":0==t&&(el.style.visibility="hidden")}catch(t){n=!0,o=t}finally{try{i||null==r.return||r.return()}finally{if(n)throw o}}var l=document.querySelectorAll(".browser-only"),a=!0,u=!1,c=void 0;try{for(var d,h=l[Symbol.iterator]();!(a=(d=h.next()).done);a=!0)el=d.value,el.tagName.includes("-")?el.setAttribute("visible",!t):!0===t?el.style.visibility="hidden":0==t&&(el.style.visibility="visible")}catch(t){u=!0,c=t}finally{try{a||null==h.return||h.return()}finally{if(u)throw c}}},onEnterVR:function(){this.mode="VR",this.cursor&&this.el.removeChild(this.cursor),this.setVROnlyVisibility(!0),this.cursor=this.createVRCursor(),console.log("FUSING"),this.cursor.setAttribute("cursor","fuse: true; fuseTimeout: 1500; rayOrigin: entity")},onExitVR:function(){this.mode="browser",this.el.removeChild(this.cursor),this.cursor=this.createDesktopCursor(),this.setVROnlyVisibility(!1)},updateCursorVisibility:function(){this.data;var t=this.el.sceneEl.querySelector(".cursor");t&&t.setAttribute("visible",this.cursorVisibility())},cursorVisibility:function(){var t=this.data;return"both"==t.visibility||t.visibility==this.mode},createDesktopCursor:function(){var t=document.createElement("a-entity");return t.className="ray-caster cursor",t.setAttribute("cursor","fuse: true; fuseTimeout: 0"),t.setAttribute("cursor","rayOrigin: mouse"),t.setAttribute("position","0 0 -1"),t.setAttribute("raycaster","objects: .clickable; interval: 0"),this.el.appendChild(t),t},createVRCursor:function(){var t=document.createElement("a-entity");t.className="ray-caster cursor",t.setAttribute("cursor","fuse: true; fuseTimeout: 1500"),t.setAttribute("position","0 0 -1"),t.setAttribute("geometry","primitive: ring; radiusInner: 0.03; radiusOuter: 0.035"),t.setAttribute("material","color: #ffffff; transparent: true; shader: flat; opacity: 0.0; alphaTest: 0.4;"),t.setAttribute("raycaster","objects: .clickable; interval: 0"),this.el.appendChild(t);var e=document.createElement("a-entity");e.id="cursor-circle",e.setAttribute("position","0 0 0"),e.setAttribute("geometry","primitive: circle; radius: 0.005"),e.setAttribute("material","color: #ffffff; shader: flat;"),t.appendChild(e);var i=document.createElement("a-animation");i.setAttribute("begin","click"),i.setAttribute("easing","linear"),i.setAttribute("attribute","scale"),i.setAttribute("dur","150"),i.setAttribute("fill","forwards"),i.setAttribute("from","0.1 0.1 0.1"),i.setAttribute("to","1 1 1"),t.appendChild(i);var n=document.createElement("a-animation");n.setAttribute("begin","cursor-fusing"),n.setAttribute("easing","linear"),n.setAttribute("attribute","scale"),n.setAttribute("dur","1500"),n.setAttribute("fill","backwards"),n.setAttribute("from","1 1 1"),n.setAttribute("to","0.1 0.1 0.1"),t.appendChild(n);var o=document.createElement("a-animation");o.setAttribute("begin","cursor-fusing"),o.setAttribute("easing","linear"),o.setAttribute("attribute","material.opacity"),o.setAttribute("dur","100"),o.setAttribute("fill","none"),o.setAttribute("from","0.0"),o.setAttribute("to","0.8"),t.appendChild(o);var s=document.createElement("a-animation");return s.setAttribute("begin","mouseleave"),s.setAttribute("attribute","material.opacity"),s.setAttribute("dur","100"),s.setAttribute("from","0.8"),s.setAttribute("to","0.0"),t.appendChild(s),t}})},function(t,e){AFRAME.registerComponent("icon-renderer",{schema:{name:{type:"string",default:"icon-help"},"font-family":{type:"string",default:"lucidweb"},"font-size":{type:"string",default:Math.pow(2,7)-10+"px"},size:{type:"number",default:Math.pow(2,7)},padding:{type:"number",default:5}},init:function(){this.bindMethods(),this.fontLoaded=!1},bindMethods:function(){this.render=AFRAME.utils.bind(this.render,this),this._dec2hex=AFRAME.utils.bind(this._dec2hex,this),this._randomId=AFRAME.utils.bind(this._randomId,this)},play:function(){setTimeout(this.render,2e3)},render:function(){var t=this.data,e=this.system.renderIcon(t.name,{"font-family":t["font-family"],"font-size":t["font-size"],size:t.size,padding:t.padding,color:"#ffffff"}),i=document.createElement("img");i.id=t.name,i.src=e,i.height=t.size,i.width=t.size,this.el.sceneEl.querySelector("a-assets").appendChild(i),this.el.setAttribute("material",{src:"#"+t.name})},_dec2hex:function(t){return("0"+t.toString(16)).substr(-2)},_randomId:function(t){var e=new Uint8Array((t||40)/2);return window.crypto.getRandomValues(e),Array.from(e,this._dec2hex).join("")}})},function(t,e){AFRAME.registerComponent("ui-button",{schema:{icon:{type:"string"},label:{type:"string"},shape:{type:"string",default:"box"},size:{type:"number",default:.3},depth:{type:"number",default:.05},color:{type:"string",default:"#333"},transparent:{type:"boolean",default:!1},opacity:{type:"number",default:1},activeColor:{type:"string",default:"#6c6c6c"},selectedColor:{type:"string",default:"#6c6c6c"},detailColor:{type:"string",default:"#fff"},detailActiveColor:{type:"string",default:"#fff"},detailSelectedColor:{type:"string",default:"#333"}},init:function(){this.buttonGeometry=this.createGeometry(),this.rotationGroup=this.createRotationGroup(this.buttonGeometry),this.icon=this.createIcon(this.rotationGroup),this.label=this.createLabel(this.rotationGroup),this.bindMethods(),this.createAnimations()},bindMethods:function(){this.onClick=AFRAME.utils.bind(this.onClick,this),this.onMouseEnter=AFRAME.utils.bind(this.onMouseEnter,this),this.onMouseLeave=AFRAME.utils.bind(this.onMouseLeave,this),this.onFusing=AFRAME.utils.bind(this.onFusing,this),this.createMaterialProperties=AFRAME.utils.bind(this.createMaterialProperties,this),this.createAnimations=AFRAME.utils.bind(this.createAnimations,this)},addEventListeners:function(){this.el.addEventListener("mouseenter",this.onMouseEnter),this.el.addEventListener("fusing",this.onFusing),this.el.addEventListener("mouseleave",this.onMouseLeave),this.el.addEventListener("click",this.onClick)},removeEventListeners:function(){this.el.removeEventListener("mouseenter",this.onMouseEnter),this.el.removeEventListener("fusing",this.onFusing),this.el.removeEventListener("mouseleave",this.onMouseLeave),this.el.removeEventListener("click",this.onClick)},play:function(){this.addEventListeners()},remove:function(){this.removeEventListeners()},update:function(t){var e=this.data;e.opacity!=t.opacity&&this.buttonGeometry&&this.buttonGeometry.setAttribute("material",{opacity:e.opacity})},createGeometry:function(){var t=this.el,e=this.data,i=null;return"box"==e.shape?i=this.createButtonGeometry():"cylinder"==e.shape&&(i=this.createCylinderGeometry()),i.setAttribute("class",t.getAttribute("class")),this.el.appendChild(i),i},createMaterialProperties:function(){var t=this.data,e={};return e.color=t.color,t.transparent&&(e.transparent=!0,e.opacity=t.opacity),e},createAnimations:function(){var t=this.data,e=document.createElement("a-animation");e.setAttribute("attribute","ui-button.opacity"),e.setAttribute("dur",400),e.setAttribute("delay",50),e.setAttribute("begin","mouseenter"),e.setAttribute("end","mouseleave"),e.setAttribute("from",t.opacity),e.setAttribute("to",1);var i=document.createElement("a-animation");i.setAttribute("attribute","ui-button.opacity"),i.setAttribute("delay",50),i.setAttribute("dur",400),i.setAttribute("begin","mouseleave"),i.setAttribute("end","mouseenter"),i.setAttribute("from",1),i.setAttribute("to",t.opacity),this.el.append(e),this.el.appendChild(i)},createButtonGeometry:function(){var t=this.data,e=document.createElement("a-entity");return e.setAttribute("geometry",{primitive:"box",width:t.size,height:t.size,depth:t.depth}),e.setAttribute("material",this.createMaterialProperties()),e},createCylinderGeometry:function(){var t=this.data,e=document.createElement("a-entity");return e.setAttribute("geometry",{primitive:"cylinder",radius:t.size/2,height:t.depth}),e.setAttribute("material",this.createMaterialProperties()),e.setAttribute("rotation","-90 0 0"),e},createRotationGroup:function(t){var e=this.data,i=document.createElement("a-entity");return"cylinder"==e.shape?(i.setAttribute("rotation","-90 0 0"),i.setAttribute("position","0 "+(e.depth/2+.001)+" 0")):i.setAttribute("position","0 0 "+(e.depth/2+.001)),t.appendChild(i),i},createIcon:function(t){var e=this.data,i=(this.el,document.createElement("ui-icon"));return i.setAttribute("name","icon-"+e.icon),i.setAttribute("height",.8*e.size),i.setAttribute("width",.8*e.size),""!=e.label&&i.setAttribute("position","0 0.03 0"),t.appendChild(i),i},createLabel:function(t){var e=this.data,i=document.createElement("a-text");return i.setAttribute("value",e.label),i.setAttribute("text",{width:.85}),i.setAttribute("align","center"),i.setAttribute("position","0 -0.075 0"),t.appendChild(i),i},onMouseEnter:function(t){var e=this.data;this.buttonGeometry.setAttribute("material",{color:e.activeColor}),this.icon.setAttribute("color",e.detailActiveColor),this.label.setAttribute("color",e.detailActiveColor)},onMouseLeave:function(t){var e=this.data;this.buttonGeometry.setAttribute("material",{color:e.color}),this.icon.setAttribute("color",e.detailColor),this.label.setAttribute("color",e.detailColor)},onFusing:function(t){var e=this.data;this.buttonGeometry.setAttribute("material",{color:e.activeColor}),this.icon.setAttribute("color",e.detailActiveColor),this.label.setAttribute("color",e.detailActiveColor)},onClick:function(t){var e=this.data;this.buttonGeometry.setAttribute("material",{color:e.selectedColor}),this.icon.setAttribute("color",e.detailSelectedColor),this.label.setAttribute("color",e.detailSelectedColor),this.el.emit("lucidweb.event.triggered",{},!1)}})},function(t,e){AFRAME.registerComponent("geometry-resize",{schema:{padding:{type:"number"}},play:function(){var o=this.el.querySelector("*");setTimeout(AFRAME.utils.bind(function(){var t=this.el,e=this.data,i=o.components.geometry.data.width,n=o.components.geometry.data.height;console.log("Text is ".concat(n," X ").concat(i)),t.setAttribute("geometry",{width:i+2*e.padding,height:n+2*e.padding})},this),50)}})},function(t,e){AFRAME.registerComponent("track-position",{schema:{target:{type:"selector"},frequency:{type:"number",default:1e3/60},x:{type:"boolean",default:!0},y:{type:"boolean",default:!0},z:{type:"boolean",default:!0}},init:function(){this.bindMethods(),this.intervalPointer=null},play:function(){var t=this.data;this.intervalPointer=setInterval(this.trackTargetPosition,t.frequency)},remove:function(){null!=this.intervalPointer&&(clearInterval(this.intervalPointer),this.intervalPointer=null)},bindMethods:function(){this.trackTargetPosition=AFRAME.utils.bind(this.trackTargetPosition,this)},trackTargetPosition:function(t){var e=this.el,i=this.data,n=i.target.getAttribute("position"),o=e.getAttribute("position"),s=o,r=!1;i.x&&n.x!=o.x?(r=!0,s.x=n.x):i.y&&n.y!=o.y?(r=!0,s.y=n.y):i.z&&n.z!=o.z&&(r=!0,s.z=n.z),r&&e.setAttribute("position",s)}})},function(t,e){AFRAME.registerComponent("track-rotation",{schema:{target:{type:"selector"},frequency:{type:"number",default:1e3},x:{type:"boolean",default:!0},y:{type:"boolean",default:!0},z:{type:"boolean",default:!0}},init:function(){this.bindMethods(),this.intervalPointer=null},play:function(){var t=this.data;this.intervalPointer=setInterval(this.trackTargetRotation,t.frequency)},remove:function(){null!=this.intervalPointer&&(clearInterval(this.intervalPointer),this.intervalPointer=null)},bindMethods:function(){this.trackTargetRotation=AFRAME.utils.bind(this.trackTargetRotation,this)},trackTargetRotation:function(t){var e=this.el;this.data.target.object3D.rotation,e.object3D.rotation}})},function(t,e,i){"use strict";i.r(e);var n=i(5);AFRAME.registerComponent("modify-property",Object(n.a)({schema:{target:{type:"selector"},property:{type:"string"},field:{type:"string"},value:{type:"string"}},onEnable:function(){var t=this.data;t.target.setAttribute(t.property,t.field,t.value)}}))},function(t,e,i){i(331),i(332),i(333),i(334),i(335),i(336),i(337),i(338),i(339),i(340),i(341),i(342),i(343)},function(t,e){AFRAME.registerPrimitive("hide-entity",{defaultComponents:{"hide-entity":{}},mappings:{target:"hide-entity.target"}})},function(t,e){AFRAME.registerPrimitive("show-entity",{defaultComponents:{"show-entity":{}},mappings:{target:"show-entity.target"}})},function(t,e){AFRAME.registerPrimitive("show-loading-screen",{defaultComponents:{"show-loading-screen":{}}})},function(t,e){AFRAME.registerPrimitive("enable-group",{defaultComponents:{"enable-group":{}},mappings:{group:"enable-group.group"}})},function(t,e){AFRAME.registerPrimitive("disable-group",{defaultComponents:{"disable-group":{}},mappings:{group:"disable-group.group"}})},function(t,e,i){"use strict";i.r(e);var n=i(5);AFRAME.registerComponent("hide-entity",Object(n.a)({schema:{target:{type:"selector"}},onEnable:function(){var t=this.data;if(t.target){t.target.setAttribute("visible",!1);for(var e=t.target.querySelectorAll(".clickable"),i=0;i<e.length;i++){var n=e[i].className;e[i].className=n.replace("clickable","unclickable")}}}}))},function(t,e,i){"use strict";i.r(e);var n=i(5);AFRAME.registerComponent("show-entity",Object(n.a)({schema:{target:{type:"selector"}},onEnable:function(){var t=this.data;if(t.target){t.target.setAttribute("visible",!0);for(var e=t.target.querySelectorAll(".unclickable"),i=0;i<e.length;i++){var n=e[i].className;e[i].className=n.replace("unclickable","clickable")}}}}))},function(t,e){AFRAME.registerComponent("device-detection",{schema:{isMobile:{type:"string",default:""},isOculus:{type:"string",default:""}},init:function(){this.bindMethods()},play:function(){this.el.setAttribute("device-detection",{isMobile:AFRAME.utils.getUrlParameter("isMobile"),isOculus:AFRAME.utils.getUrlParameter("isOculus")})},bindMethods:function(){var t=AFRAME.utils.bind;this.isMobile=t(this.isMobile,this),this.isOculus=t(this.isOculus,this)},isMobile:function(){switch(this.data.isMobile){case"yes":return console.warn("SPOOFING isMobile() == true"),!0;case"no":return console.warn("SPOOFING isMobile() == false"),!1;default:return AFRAME.utils.device.isMobile()}},isOculus:function(){switch(this.data.isOculus){case"yes":return console.warn("SPOOFING isOculus() == true"),!0;case"no":return console.warn("SPOOFING isOculus() == false"),!1;default:return null!=window.navigator.userAgent.match(/(Pacific)?.+OculusBrowser/g)}}})},function(t,e){AFRAME.registerComponent("transition-to-cardboard",{schema:{countdown:{type:"number",default:10}},init:function(){this.bindMethods(),this.transitioning=!1,this.countdown="",this.countdownPointer=null,this.initializeCountdownHTML(),this.initializeModalHTML()},bindMethods:function(){var t=AFRAME.utils.bind;this.addEventListeners=t(this.addEventListeners,this),this.removeEventListeners=t(this.removeEventListeners,this),this.startTransitioningToCardboard=t(this.startTransitioningToCardboard,this),this.onOrientationChange=t(this.onOrientationChange,this),this.advanceCountdown=t(this.advanceCountdown,this)},play:function(){this.addEventListeners()},remove:function(){this.removeEventListeners()},addEventListeners:function(){window.addEventListener("orientationchange",this.onOrientationChange)},removeEventListeners:function(){window.removeEventListener("orientationchange",this.onOrientationChange)},initializeCountdownHTML:function(){this.countdownParagraph=document.createElement("p"),this.countdownParagraph.className="transition-to-cardboard-countdown",this.countdownParagraph.innerText=this.countdown},initializeModalHTML:function(){this.modal=document.createElement("div"),this.modal.id="assist-cardboard",this.modal.innerText="&nbsp;",this.modal.appendChild(this.countdownParagraph),this.el.sceneEl.appendChild(this.modal)},startTransitioningToCardboard:function(){var t=this.data;this.transitioning=!0,this.modal.style.display="block",this.countdown=t.countdown;var e=setInterval(AFRAME.utils.bind(function(){0==this.countdown&&(console.warn("transitioning now too soon?"),this.modal.style.display="none",this.el.enterVR(),clearInterval(e))},this),50)},onOrientationChange:function(){this.data;var t=screen.msOrientation||(screen.orientation||screen.mozOrientation||{}).type;console.log(t),!this.transitioning||"landscape"!=t&&"landscape-primary"!=t&&"landscape-secondary"!=t||(console.log("detected landscape orientation"),this.countdownPointer=setInterval(this.advanceCountdown,1e3))},advanceCountdown:function(){console.log("Counting "+this.countdown),this.countdown<=0&&(clearInterval(this.countdownPointer),this.countdownPointer=null),this.countdown-=1}})},function(t,e){AFRAME.registerComponent("show-loading-screen",{init:function(){this.modal=null,this.startExperience=AFRAME.utils.bind(this.startExperience,this),this.enterVrButton=null},play:function(){null==this.modal&&(this.modal=this.createModal());for(var t=this.modal.querySelectorAll(".start"),e=0;e<t.length;e++)t[e].addEventListener("click",this.startExperience);this.enterVrButton=this.el.sceneEl.querySelector(".a-enter-vr"),null!=this.enterVrButton&&(this.enterVrButton.style.display="none")},createModal:function(){var t=document.createElement("div");t.className="modal-dark";var e=document.createElement("a");e.setAttribute("href","#"),e.className="start";var i=document.createElement("span");i.className="logo";var n=document.createElement("img");n.setAttribute("src","./assets/images/logo_lucidweb.png"),i.appendChild(n),e.appendChild(i);var o=document.createElement("span");return o.className="text",o.innerText="Start your experience",e.appendChild(o),t.appendChild(e),document.body.appendChild(t),t},startExperience:function(){this.modal.style.display="none",null!=this.enterVrButton&&(this.enterVrButton.style.display="block");var t=this.el.sceneEl.systems["video-controller"];t?t.documentInteractionReceived=!0:console.error("No video controller system found");var e=this.el.sceneEl.querySelector("#main");e?e.emit("lucidweb.enable"):console.warn("Main experience not found")}})},function(t,e,i){"use strict";i.r(e);var n=i(5);AFRAME.registerComponent("enable-group",Object(n.a)({schema:{group:{type:"selector"}},onEnable:function(){var t=this.data;if(null!=t.group&&null!=t.group)for(var e=t.group.children.length,i=0;i<e;i++){t.group.children[i].emit("lucidweb.enable",{msg:"Enabled in group"},!1)}else console.warn("Enable group has not found any children")}}))},function(t,e,i){"use strict";i.r(e);var n=i(5);AFRAME.registerComponent("disable-group",Object(n.a)({schema:{group:{type:"selector"}},onEnable:function(){var t=this.data;if(null!=t.group&&null!=t.group)for(var e=t.group.children.length,i=0;i<e;i++){var n=t.group.children[i];console.log(n),n.emit("lucidweb.disable",{msg:"disabled in group"},!1)}else console.warn("disable group has not found any children")}}))},function(t,e,i){t.exports=i.p+"assets/styles/utilities.less"},function(t,e,i){t.exports=i.p+"assets/video/demo.mp4?303f255c6ee88dec598344d9471851b2"},function(t,e,i){t.exports=i.p+"assets/images/preview.gif?feb50a33a3997930dbd05713aa3f5e5d"},function(t,e,i){t.exports=i.p+"assets/images/preview.jpg?3acaf178c2e77b2a17f28af097233836"},function(t,e){AFRAME.registerComponent("custom-thing",{schema:{subject:{type:"string",default:"world"}},init:function(){console.log(this.system.data.greeting+this.data.subject+"!")}})},function(t,e){AFRAME.registerPrimitive("custom-thing",{defaultComponents:{"custom-thing":{}},mappings:{subject:"custom-thing.subject"}})},function(t,e,i){"use strict";function r(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],n=3<arguments.length&&void 0!==arguments[3]&&arguments[3],o=Math.floor(t/3600),s=Math.floor(t/60-60*o*60),r=Math.floor(t%60),l=("00"+o).slice(-2),a=("00"+s).slice(-2),u=("00"+r).slice(-2),c=[];return n&&c.push(l),i&&c.push(a),e&&c.push(u),c.join(":")}i.r(e),AFRAME.registerComponent("video-controls",{init:function(){this.bindMethods(),this.depth=.05,this.width=1.7,this.vrMode=!1,this.keepAlivePointer=null,this.scrollbarRaycastInterval=[],this.menuRaycastInterval=null,this.progressUpdatingInterval=null,this.activator=null,this.activatorButton=null,this.controls=null,this.keepAliveTarget=null,this.background=null,this.playButton=null,this.pauseButton=null,this.replayButton=null,this.volumeOnButton=null,this.volumeOffButton=null,this.description=null,this.title=null,this.timeProgress=null,this.scrollbar=null,this.scrollbarBackground=null,this.scrollbarProgress=null,this.scrollbarCursor=null,this.scrollbarCursorLabel=null,this.createControls()},videoControllerSystem:function(){return this.el.sceneEl.systems["video-controller"]},play:function(){this.el;this.addEventListeners()},bindMethods:function(){var t=AFRAME.utils.bind;this.addEventListeners=t(this.addEventListeners,this),this.removeEventListeners=t(this.removeEventListeners,this),this.calculateScrollbarRelativeIntersectionPoint=t(this.calculateScrollbarRelativeIntersectionPoint,this),this.calculateScrollbarLeftMostPosition=t(this.calculateScrollbarLeftMostPosition,this),this.updateVideoProgressIndicators=t(this.updateVideoProgressIndicators,this),this.updateVideoScrollbarProgress=t(this.updateVideoScrollbarProgress,this),this.hideMenu=t(this.hideMenu,this),this.showMenu=t(this.showMenu,this),this.keepMenuVisible=t(this.keepMenuVisible,this),this.verifyOrientedTowardsMenu=t(this.verifyOrientedTowardsMenu,this),this.createControls=t(this.createControls,this),this.createTimeProgress=t(this.createTimeProgress,this),this.createScrollbar=t(this.createScrollbar,this),this.createScrollbarCursor=t(this.createScrollbarCursor,this),this.createDescription=t(this.createDescription,this),this.createBackground=t(this.createBackground,this),this.createKeepAliveTarget=t(this.createKeepAliveTarget,this),this.createPauseButton=t(this.createPauseButton,this),this.createPlayButton=t(this.createPlayButton,this),this.createReplayButton=t(this.createReplayButton,this),this.createTitle=t(this.createTitle,this),this.createVolumeOffButton=t(this.createVolumeOffButton,this),this.createVolumeOnButton=t(this.createVolumeOnButton,this),this.onEnterVR=t(this.onEnterVR,this),this.onExitVR=t(this.onExitVR,this),this.onKeepAliveExpired=t(this.onKeepAliveExpired,this),this.onSceneClick=t(this.onSceneClick,this),this.onActivateButtonClicked=t(this.onActivateButtonClicked,this),this.onPlayButtonClicked=t(this.onPlayButtonClicked,this),this.onReplayButtonClicked=t(this.onReplayButtonClicked,this),this.onPauseButtonClicked=t(this.onPauseButtonClicked,this),this.onVolumeOnButtonClicked=t(this.onVolumeOnButtonClicked,this),this.onVolumeOffButtonClicked=t(this.onVolumeOffButtonClicked,this),this.onScrollbarClicked=t(this.onScrollbarClicked,this),this.onRaycastIntersection=t(this.onRaycastIntersection,this),this.onRaycastIntersectionCleared=t(this.onRaycastIntersectionCleared,this),this.updateScrollbarCursor=t(this.updateScrollbarCursor,this),this.onVideoControllerPlayingStarted=t(this.onVideoControllerPlayingStarted,this),this.onVideoControllerPlayingEnded=t(this.onVideoControllerPlayingEnded,this),this.onVideoControllerPlayingPaused=t(this.onVideoControllerPlayingPaused,this),this.onVideoControllerPlaying=t(this.onVideoControllerPlaying,this),this.onVideoControllerVolumeOn=t(this.onVideoControllerVolumeOn,this),this.onVideoControllerVolumeOff=t(this.onVideoControllerVolumeOff,this)},addEventListeners:function(){var t=this.el.sceneEl;t.addEventListener("lucidweb.video-controller.playing-started",this.onVideoControllerPlayingStarted),t.addEventListener("lucidweb.video-controller.playing-ended",this.onVideoControllerPlayingEnded),t.addEventListener("lucidweb.video-controller.video-paused",this.onVideoControllerPlayingPaused),t.addEventListener("lucidweb.video-controller.video-playing",this.onVideoControllerPlaying),t.addEventListener("lucidweb.video-controller.volume-off",this.onVideoControllerVolumeOff),t.addEventListener("lucidweb.video-controller.volume-on",this.onVideoControllerVolumeOn),t.addEventListener("enter-vr",this.onEnterVR),t.addEventListener("exit-vr",this.onExitVR),this.activator.addEventListener("click",this.onActivateButtonClicked),this.playButton.addEventListener("click",this.onPlayButtonClicked),this.replayButton.addEventListener("click",this.onReplayButtonClicked),this.pauseButton.addEventListener("click",this.onPauseButtonClicked),this.volumeOnButton.addEventListener("click",this.onVolumeOnButtonClicked),this.volumeOffButton.addEventListener("click",this.onVolumeOffButtonClicked),this.scrollbar.addEventListener("click",this.onScrollbarClicked),this.scrollbar.addEventListener("raycaster-intersected",this.onRaycastIntersection),this.scrollbar.addEventListener("raycaster-intersected-cleared",this.onRaycastIntersectionCleared)},removeEventListeners:function(){var t=this.el.sceneEl;t.removeEventListener("lucidweb.video-controller.playing-started",this.onVideoControllerPlayingStarted),t.removeEventListener("lucidweb.video-controller.playing-ended",this.onVideoControllerPlayingEnded),t.removeEventListener("lucidweb.video-controller.video-paused",this.onVideoControllerPlayingPaused),t.removeEventListener("lucidweb.video-controller.video-playing",this.onVideoControllerPlaying),t.removeEventListener("lucidweb.video-controller.volume-off",this.onVideoControllerVolumeOff),t.removeEventListener("lucidweb.video-controller.volume-on",this.onVideoControllerVolumeOn),t.removeEventListener("enter-vr",this.onEnterVR),t.removeEventListener("exit-vr",this.onExitVR),t.removeEventListener("click",this.onSceneClick,!1),this.playButton.removeEventListener("click",this.onPlayButtonClicked),this.pauseButton.removeEventListener("click",this.onPauseButtonClicked),this.volumeOnButton.removeEventListener("click",this.onVolumeOnButtonClicked),this.volumeOffButton.removeEventListener("click",this.onVolumeOffButtonClicked),this.scrollbar.removeEventListener("click",this.onScrollbarClicked),this.scrollbar.removeEventListener("raycaster-intersected",this.onRaycastIntersection),this.scrollbar.removeEventListener("raycaster-intersected-cleared",this.onRaycastIntersectionCleared)},remove:function(){this.removeEventListeners()},onVideoControllerPlayingStarted:function(t){var e=this.videoControllerSystem().title();this.title.setAttribute("text",{value:e}),this.progressUpdatingInterval=setInterval(this.updateVideoProgressIndicators,1e3/60);var i=this.pauseButton.getAttribute("position");this.pauseButton.setAttribute("position",{x:i.x,y:i.y,z:.001}),this.playButton.setAttribute("position",{x:i.x,y:i.y,z:1e3}),this.replayButton.setAttribute("position",{x:i.x,y:i.y,z:1e3})},onVideoControllerPlayingEnded:function(t){this.progressUpdatingInterval&&clearInterval(this.progressUpdatingInterval);var e=this.pauseButton.getAttribute("position");this.pauseButton.setAttribute("position",{x:e.x,y:e.y,z:1e3}),this.playButton.setAttribute("position",{x:e.x,y:e.y,z:1e3}),this.replayButton.setAttribute("position",{x:e.x,y:e.y,z:.001}),this.vrMode&&this.showMenu()},onVideoControllerPlayingPaused:function(t){var e=this.pauseButton.getAttribute("position");this.pauseButton.setAttribute("position",{x:e.x,y:e.y,z:1e3}),this.playButton.setAttribute("position",{x:e.x,y:e.y,z:.001}),this.replayButton.setAttribute("position",{x:e.x,y:e.y,z:1e3})},onVideoControllerPlaying:function(t){var e=this.videoControllerSystem().title();this.title.setAttribute("text",{value:e}),this.progressUpdatingInterval=setInterval(this.updateVideoProgressIndicators,1e3/60);var i=this.playButton.getAttribute("position");this.pauseButton.setAttribute("position",{x:i.x,y:i.y,z:.001}),this.playButton.setAttribute("position",{x:i.x,y:i.y,z:1e3}),this.replayButton.setAttribute("position",{x:i.x,y:i.y,z:1e3}),this.keepMenuVisible(1e3)},onVideoControllerVolumeOff:function(t){var e=this.volumeOnButton.getAttribute("position");this.volumeOnButton.setAttribute("position",{x:e.x,y:e.y,z:.001}),this.volumeOffButton.setAttribute("position",{x:e.x,y:e.y,z:1e3})},onVideoControllerVolumeOn:function(t){var e=this.volumeOnButton.getAttribute("position");this.volumeOnButton.setAttribute("position",{x:e.x,y:e.y,z:1e3}),this.volumeOffButton.setAttribute("position",{x:e.x,y:e.y,z:.001})},updateVideoScrollbarProgress:function(t){var e=-this.width/2*(1-t),i=this.width*t;this.scrollbarProgress.setAttribute("geometry",{width:i}),this.scrollbarProgress.setAttribute("position",{x:e,y:0,z:0})},updateVideoProgressIndicators:function(){var t=this.videoControllerSystem().duration(),e=this.videoControllerSystem().currentTime(),i=e/t,n=r(t),o=r(e);this.timeProgress.setAttribute("text",{value:o+" / "+n}),this.updateVideoScrollbarProgress(i)},onSceneClick:function(t){var e=this.el.getAttribute("visible");this.vrMode&&0==e&&this.onActivateButtonClicked(t)},onEnterVR:function(t){this.vrMode=!0,this.activator.setAttribute("visible",!0),this.activator.className="clickable"},onExitVR:function(t){this.vrMode=!1,this.activator.setAttribute("visible",!1),this.activator.className="",this.hideMenu()},showMenu:function(){this.menuRaycastInterval;var t=this.keepAlivePointer;null!==t&&clearTimeout(t);for(var e=this.controls.querySelectorAll(".unclickable"),i=0;i<e.length;i++)e[i].className="clickable";this.vrMode?this.activator.setAttribute("visible",!1):this.activator.setAttribute("visible",!0),this.el.setAttribute("visible",!0)},verifyOrientedTowardsMenu:function(){return 0<this.el.sceneEl.querySelector(".ray-caster").components.raycaster.raycaster.intersectObjects([this.keepAliveTarget.object3D],!0).length},hideMenu:function(){var t=this.menuRaycastInterval;this.vrMode?this.activator.setAttribute("visible",!0):this.activator.setAttribute("visible",!1),this.el.setAttribute("visible",!1);for(var e=this.controls.querySelectorAll(".clickable"),i=0;i<e.length;i++)e[i].className="unclickable";null!=t&&(clearInterval(t),this.menuRaycastInterval=null)},keepMenuVisible:function(t){var e=this.keepAlivePointer;null!==e&&clearTimeout(e),this.keepAlivePointer=setTimeout(this.onKeepAliveExpired,t)},onKeepAliveExpired:function(t){if(this.verifyOrientedTowardsMenu())this.keepMenuVisible(4e3);else{for(var e=this.controls.querySelectorAll(".clickable"),i=0;i<e.length;i++)e[i].className="unclickable";this.keepAlivePointer=null,this.el.setAttribute("visible",!1),this.vrMode?(this.activator.setAttribute("visible",!0),this.activator.setAttribute("class","clickable")):(this.activator.setAttribute("visible",!1),this.activator.setAttribute("class","unclickable"))}},onActivateButtonClicked:function(t){for(var e=this.controls.querySelectorAll(".unclickable"),i=0;i<e.length;i++)e[i].className="clickable";this.activator.setAttribute("visible",!1),this.activator.setAttribute("class","unclickable");var n=this.el.object3D.getWorldRotation(),o=this.el.sceneEl.camera.el.object3D.getWorldRotation();this.el.object3D.setRotationFromEuler(new THREE.Euler(n.x,o.y,n.z,n.order)),this.el.setAttribute("visible",!0),this.keepMenuVisible(4e3)},onPlayButtonClicked:function(t){this.videoControllerSystem().onVideoControlsPlayClicked()},onReplayButtonClicked:function(t){this.videoControllerSystem().onVideoControlsReplayClicked()},onPauseButtonClicked:function(t){this.videoControllerSystem().onVideoControlsPauseClicked()},onVolumeOnButtonClicked:function(t){this.videoControllerSystem().onVideoControlsVolumeOnClicked()},onVolumeOffButtonClicked:function(t){this.videoControllerSystem().onVideoControlsVolumeOffClicked()},calculateScrollbarLeftMostPosition:function(){var t=this.scrollbarBackground.object3D.position,e=new THREE.Vector3(t.x-this.width/2,t.y,t.z);this.scrollbarBackground.object3D.localToWorld(e);return e},calculateScrollbarRelativeIntersectionPoint:function(t){var e=this.calculateScrollbarLeftMostPosition();t.x,e.x;return e.distanceTo(t)/this.width},onScrollbarClicked:function(t){var e=t.detail.intersection.point,i=this.calculateScrollbarRelativeIntersectionPoint(e),n=Math.floor(i*this.videoControllerSystem().duration());this.updateVideoScrollbarProgress(i),this.videoControllerSystem().changeTime(n)},onRaycastIntersection:function(t){this.scrollbarRaycastInterval.push(setInterval(this.updateScrollbarCursor,10))},onRaycastIntersectionCleared:function(t){if(0<this.scrollbarRaycastInterval.length){var e=this.scrollbarRaycastInterval.shift();clearInterval(e)}0==this.scrollbarRaycastInterval.length&&this.scrollbarCursor.setAttribute("visible",!1)},updateScrollbarCursor:function(){this.el;var t=this.el.sceneEl.querySelector(".ray-caster").components.raycaster.raycaster.intersectObjects([this.scrollbarBackground.object3D],!0);if(0<t.length){var e=this.calculateScrollbarRelativeIntersectionPoint(t[0].point);this.scrollbarCursor.setAttribute("visible",!0),this.scrollbarCursor.setAttribute("position",{x:this.width*e-this.width/2,y:0,z:0});var i=Math.floor(this.videoControllerSystem().duration()*e),n=i%60,o=("00"+Math.floor(i/60)).slice(-2),s=("00"+n).slice(-2);"".concat(o,":").concat(s);this.scrollbarCursorLabel.setAttribute("text",{value:r(i)})}},createControls:function(){var t=this.el;this.el.setAttribute("visible",!1),this.controls=document.createElement("a-entity"),this.controls.setAttribute("position","0 0 -1.5"),this.controls.setAttribute("rotation","0 0 0"),this.el.appendChild(this.controls),this.activator=this.createActivator(t.sceneEl),this.background=this.createBackground(this.controls),this.keepAliveTarget=this.createKeepAliveTarget(this.controls),this.playButton=this.createPlayButton(this.background),this.pauseButton=this.createPauseButton(this.background),this.replayButton=this.createReplayButton(this.background),this.volumeOnButton=this.createVolumeOnButton(this.background),this.volumeOffButton=this.createVolumeOffButton(this.background),this.description=this.createDescription(this.background),this.scrollbar=this.createScrollbar(this.controls)},createActivator:function(t){return this.activator=document.createElement("a-entity"),this.activator.setAttribute("rotation","50 0 0"),this.activator.setAttribute("track-position",{target:"#maincamera"}),this.activator.setAttribute("track-rotation",{target:"#maincamera",x:!1,z:!1}),this.activator.setAttribute("visible",!1),this.activatorButton=document.createElement("ui-button"),this.activatorButton.setAttribute("shape","cylinder"),this.activatorButton.setAttribute("icon","menu"),this.activatorButton.setAttribute("position","0 -1.2 0"),this.activatorButton.setAttribute("rotation","90 0 0"),this.activatorButton.setAttribute("depth","0.01"),this.activatorButton.setAttribute("size",.1),this.activatorButton.setAttribute("visible",!0),this.activatorButton.setAttribute("transparent",!0),this.activatorButton.setAttribute("opacity",.4),this.activatorButton.setAttribute("color","#333"),this.activatorButton.setAttribute("active-color","#333"),this.activator.appendChild(this.activatorButton),t.appendChild(this.activator),this.activator},createBackground:function(t){var e=document.createElement("a-entity");e.setAttribute("geometry","primitive: box; color: #333; depth: "+this.depth+"; width: 1.695; height: 0.2995;"),e.setAttribute("material","color: #333;");var i=document.createElement("a-entity");return i.setAttribute("geometry","primitive: box; color: #333; depth: "+this.depth+"; width: 1.695; height: 0.2995;"),i.setAttribute("material","color: none; opacity: 0"),i.setAttribute("position","0 0.025 -0.05"),i.setAttribute("scale","1.1 1.7 0"),t.appendChild(e),t.appendChild(i),e},createKeepAliveTarget:function(t){var e=document.createElement("a-entity");return e.setAttribute("geometry","primitive: box; color: #333; depth: "+this.depth+"; width: 1.695; height: 0.2995;"),e.setAttribute("material","color: none; opacity: 0"),e.setAttribute("position","0 0.025 -0.05"),e.setAttribute("scale","1.1 1.7 0"),t.appendChild(e),e},createPlayButton:function(t){var e=document.createElement("ui-button");return e.setAttribute("icon","play"),e.className="clickable",e.setAttribute("position","-0.7 0 0.001"),t.appendChild(e),e},createPauseButton:function(t){var e=document.createElement("ui-button");return e.setAttribute("icon","pause"),e.className="clickable",e.setAttribute("position","-0.7 0 1000"),t.appendChild(e),e},createReplayButton:function(t){var e=document.createElement("ui-button");return e.setAttribute("icon","play"),e.className="clickable",e.setAttribute("position","-0.7 0 1000"),t.appendChild(e),e},createVolumeOnButton:function(t){var e=document.createElement("ui-button");return e.setAttribute("icon","mute"),e.className="clickable",e.setAttribute("position","-0.4 0 1000"),t.appendChild(e),e},createVolumeOffButton:function(t){var e=document.createElement("ui-button");return e.setAttribute("icon","volume"),e.className="clickable",e.setAttribute("position","-0.4 0 0.001"),t.appendChild(e),e},createTitle:function(t){var e=document.createElement("a-text");return e.setAttribute("value","Old city center"),e.setAttribute("align","left"),e.setAttribute("width",2),e.setAttribute("position","0 0.05 0"),t.appendChild(e),e},createTimeProgress:function(t){var e=document.createElement("a-text");return e.setAttribute("value","00:34 | 00:54"),e.setAttribute("align","left"),e.setAttribute("width",1.6),e.setAttribute("position","0 -0.05 0"),this.timeProgressLabel=e,t.appendChild(e),e},createDescription:function(t){var e=document.createElement("a-entity");return e.setAttribute("position","-0.15 0 0.051"),this.title=this.createTitle(e),this.timeProgress=this.createTimeProgress(e),t.appendChild(e),e},createScrollbar:function(t){var e=document.createElement("a-entity");e.className="clickable",e.setAttribute("position","0 0.190 0");var i=document.createElement("a-entity");i.className="scrollbar-background",i.setAttribute("geometry","primitive: box; depth: "+(this.depth-.005)+"; width: "+(this.width-.01)+"; height: 0.0495;"),i.setAttribute("material","color: #484848;"),e.appendChild(i),this.scrollbarBackground=i;var n=document.createElement("a-entity");return n.setAttribute("geometry","primitive: box; depth: "+this.depth+"; width: 0.0001; height: 0.0502;"),n.setAttribute("position","-0.85 0 0"),n.setAttribute("material","color: #00ddc0;"),e.appendChild(n),this.scrollbarProgress=n,this.scrollbarCursor=this.createScrollbarCursor(e),t.appendChild(e),e},createScrollbarCursor:function(t){var e=document.createElement("a-entity");e.setAttribute("visible",!1),e.setAttribute("position","0.120 0 0");var i=document.createElement("a-entity");i.setAttribute("geometry","primitive: box; depth: "+(this.depth+.01)+"; width: 0.05; height: 0.06;"),i.setAttribute("material","color: #f8eb0e;"),e.appendChild(i);var n=document.createElement("a-text");return n.setAttribute("value",""),n.setAttribute("align","center"),n.setAttribute("width","1"),n.setAttribute("position","0 0.09 0"),n.setAttribute("color","#f8eb0e"),e.appendChild(n),this.scrollbarCursorLabel=n,t.appendChild(e),e}})},function(t,e,i){"use strict";i.r(e);var n={"icon-reload":"","icon-arrow_down":"","icon-arrow_left":"","icon-arrow_up":"","icon-cardboard":"","icon-code":"","icon-facebook":"","icon-mute":"","icon-pause":"","icon-play":"","icon-resize":"","icon-settings":"","icon-share":"","icon-twitter":"","icon-volume":"","icon-close":"","icon-link":"","icon-menu":""};function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(t){s(e,t,i[t])})}return e}function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}AFRAME.registerSystem("icon-renderer",{init:function(){this.columns=0,this.size=54,this.margin=5,this.padding=5,this._canvas=null,this.renderUnicodeCharacter=AFRAME.utils.bind(this.renderUnicodeCharacter,this),this.characterMap=[];var t=document.createElement("p");t.className="preload-icons",t.innerText=".",document.body.appendChild(t)},_iconMeasurements:function(t,e){var i=this._iconDimension();e.measureText(t);return{x:this.size/2+this.padding,y:this.padding,width:i,height:i}},_createCanvas:function(t){var e=document.createElement("canvas");return e.className="icon-renderer",e.setAttribute("width",t+"px"),e.setAttribute("height",t+"px"),document.body.appendChild(e),e},_drawIcon:function(t,e){var i=this._createCanvas(e.size),n=i.getContext("2d");n.font=e["font-size"]+" "+e["font-family"],n.textBaseline="top",n.textAlign="center",n.fillStyle=e.color;var o={x:e.size/2,y:e.padding,width:e.size,height:e.size,"max-width":e.size};n.fillText(t,o.x,o.y,o["max-width"]);var s=i.toDataURL("image/png");return document.body.removeChild(i),s},_defaultConfig:{"font-family":"lucidweb",size:Math.pow(2,7),"font-size":Math.pow(2,7)-10+"px",padding:5,color:"#ffffff"},renderIcon:function(t,e){return t in n?this._drawIcon(n[t],o({},this._defaultConfig,e)):(console.log("Unknown icon: "+t),this._drawIcon(n["icon-help"],o({},this._defaultConfig,e)))}})}]);